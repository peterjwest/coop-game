!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=6)}([function(e,t,n){(function(e,r){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="__lodash_hash_undefined__",l=500,f="__lodash_placeholder__",d=1,p=2,v=4,h=1,g=2,y=1,m=2,x=4,b=8,_=16,w=32,S=64,I=128,A=256,C=512,P=30,k="...",B=800,M=16,T=1,R=2,E=1/0,O=9007199254740991,N=1.7976931348623157e308,j=NaN,V=4294967295,L=V-1,F=V>>>1,W=[["ary",I],["bind",y],["bindKey",m],["curry",b],["curryRight",_],["flip",C],["partial",w],["partialRight",S],["rearg",A]],q="[object Arguments]",z="[object Array]",D="[object AsyncFunction]",U="[object Boolean]",G="[object Date]",H="[object DOMException]",$="[object Error]",Y="[object Function]",X="[object GeneratorFunction]",Z="[object Map]",Q="[object Number]",K="[object Null]",J="[object Object]",ee="[object Proxy]",te="[object RegExp]",ne="[object Set]",re="[object String]",oe="[object Symbol]",ie="[object Undefined]",ae="[object WeakMap]",se="[object WeakSet]",ue="[object ArrayBuffer]",ce="[object DataView]",le="[object Float32Array]",fe="[object Float64Array]",de="[object Int8Array]",pe="[object Int16Array]",ve="[object Int32Array]",he="[object Uint8Array]",ge="[object Uint8ClampedArray]",ye="[object Uint16Array]",me="[object Uint32Array]",xe=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,we=/&(?:amp|lt|gt|quot|#39);/g,Se=/[&<>"']/g,Ie=RegExp(we.source),Ae=RegExp(Se.source),Ce=/<%-([\s\S]+?)%>/g,Pe=/<%([\s\S]+?)%>/g,ke=/<%=([\s\S]+?)%>/g,Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Me=/^\w*$/,Te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Re=/[\\^$.*+?()[\]{}|]/g,Ee=RegExp(Re.source),Oe=/^\s+|\s+$/g,Ne=/^\s+/,je=/\s+$/,Ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Le=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /,We=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qe=/\\(\\)?/g,ze=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,De=/\w*$/,Ue=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,He=/^\[object .+?Constructor\]$/,$e=/^0o[0-7]+$/i,Ye=/^(?:0|[1-9]\d*)$/,Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Ke="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Je="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",et="[\\ud800-\\udfff]",tt="["+Je+"]",nt="["+Ke+"]",rt="\\d+",ot="[\\u2700-\\u27bf]",it="[a-z\\xdf-\\xf6\\xf8-\\xff]",at="[^\\ud800-\\udfff"+Je+rt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",st="\\ud83c[\\udffb-\\udfff]",ut="[^\\ud800-\\udfff]",ct="(?:\\ud83c[\\udde6-\\uddff]){2}",lt="[\\ud800-\\udbff][\\udc00-\\udfff]",ft="[A-Z\\xc0-\\xd6\\xd8-\\xde]",dt="(?:"+it+"|"+at+")",pt="(?:"+ft+"|"+at+")",vt="(?:"+nt+"|"+st+")"+"?",ht="[\\ufe0e\\ufe0f]?"+vt+("(?:\\u200d(?:"+[ut,ct,lt].join("|")+")[\\ufe0e\\ufe0f]?"+vt+")*"),gt="(?:"+[ot,ct,lt].join("|")+")"+ht,yt="(?:"+[ut+nt+"?",nt,ct,lt,et].join("|")+")",mt=RegExp("['’]","g"),xt=RegExp(nt,"g"),bt=RegExp(st+"(?="+st+")|"+yt+ht,"g"),_t=RegExp([ft+"?"+it+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tt,ft,"$"].join("|")+")",pt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tt,ft+dt,"$"].join("|")+")",ft+"?"+dt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ft+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rt,gt].join("|"),"g"),wt=RegExp("[\\u200d\\ud800-\\udfff"+Ke+"\\ufe0e\\ufe0f]"),St=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,It=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],At=-1,Ct={};Ct[le]=Ct[fe]=Ct[de]=Ct[pe]=Ct[ve]=Ct[he]=Ct[ge]=Ct[ye]=Ct[me]=!0,Ct[q]=Ct[z]=Ct[ue]=Ct[U]=Ct[ce]=Ct[G]=Ct[$]=Ct[Y]=Ct[Z]=Ct[Q]=Ct[J]=Ct[te]=Ct[ne]=Ct[re]=Ct[ae]=!1;var Pt={};Pt[q]=Pt[z]=Pt[ue]=Pt[ce]=Pt[U]=Pt[G]=Pt[le]=Pt[fe]=Pt[de]=Pt[pe]=Pt[ve]=Pt[Z]=Pt[Q]=Pt[J]=Pt[te]=Pt[ne]=Pt[re]=Pt[oe]=Pt[he]=Pt[ge]=Pt[ye]=Pt[me]=!0,Pt[$]=Pt[Y]=Pt[ae]=!1;var kt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bt=parseFloat,Mt=parseInt,Tt="object"==typeof e&&e&&e.Object===Object&&e,Rt="object"==typeof self&&self&&self.Object===Object&&self,Et=Tt||Rt||Function("return this")(),Ot=t&&!t.nodeType&&t,Nt=Ot&&"object"==typeof r&&r&&!r.nodeType&&r,jt=Nt&&Nt.exports===Ot,Vt=jt&&Tt.process,Lt=function(){try{var e=Nt&&Nt.require&&Nt.require("util").types;return e||Vt&&Vt.binding&&Vt.binding("util")}catch(e){}}(),Ft=Lt&&Lt.isArrayBuffer,Wt=Lt&&Lt.isDate,qt=Lt&&Lt.isMap,zt=Lt&&Lt.isRegExp,Dt=Lt&&Lt.isSet,Ut=Lt&&Lt.isTypedArray;function Gt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ht(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function $t(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Yt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Zt(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function Qt(e,t){return!!(null==e?0:e.length)&&un(e,t,0)>-1}function Kt(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function Jt(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function en(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function tn(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function nn(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function rn(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var on=dn("length");function an(e,t,n){var r;return n(e,function(e,n,o){if(t(e,n,o))return r=n,!1}),r}function sn(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function un(e,t,n){return t==t?function(e,t,n){var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):sn(e,ln,n)}function cn(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function ln(e){return e!=e}function fn(e,t){var n=null==e?0:e.length;return n?hn(e,t)/n:j}function dn(e){return function(t){return null==t?i:t[e]}}function pn(e){return function(t){return null==e?i:e[t]}}function vn(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}function hn(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function gn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function yn(e){return function(t){return e(t)}}function mn(e,t){return Jt(t,function(t){return e[t]})}function xn(e,t){return e.has(t)}function bn(e,t){for(var n=-1,r=e.length;++n<r&&un(t,e[n],0)>-1;);return n}function _n(e,t){for(var n=e.length;n--&&un(t,e[n],0)>-1;);return n}var wn=pn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Sn=pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function In(e){return"\\"+kt[e]}function An(e){return wt.test(e)}function Cn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function Pn(e,t){return function(n){return e(t(n))}}function kn(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n];a!==t&&a!==f||(e[n]=f,i[o++]=n)}return i}function Bn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Mn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Tn(e){return An(e)?function(e){var t=bt.lastIndex=0;for(;bt.test(e);)++t;return t}(e):on(e)}function Rn(e){return An(e)?function(e){return e.match(bt)||[]}(e):function(e){return e.split("")}(e)}var En=pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var On=function e(t){var n,r=(t=null==t?Et:On.defaults(Et.Object(),t,On.pick(Et,It))).Array,o=t.Date,Ke=t.Error,Je=t.Function,et=t.Math,tt=t.Object,nt=t.RegExp,rt=t.String,ot=t.TypeError,it=r.prototype,at=Je.prototype,st=tt.prototype,ut=t["__core-js_shared__"],ct=at.toString,lt=st.hasOwnProperty,ft=0,dt=(n=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",pt=st.toString,vt=ct.call(tt),ht=Et._,gt=nt("^"+ct.call(lt).replace(Re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=jt?t.Buffer:i,bt=t.Symbol,wt=t.Uint8Array,kt=yt?yt.allocUnsafe:i,Tt=Pn(tt.getPrototypeOf,tt),Rt=tt.create,Ot=st.propertyIsEnumerable,Nt=it.splice,Vt=bt?bt.isConcatSpreadable:i,Lt=bt?bt.iterator:i,on=bt?bt.toStringTag:i,pn=function(){try{var e=Fi(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Nn=t.clearTimeout!==Et.clearTimeout&&t.clearTimeout,jn=o&&o.now!==Et.Date.now&&o.now,Vn=t.setTimeout!==Et.setTimeout&&t.setTimeout,Ln=et.ceil,Fn=et.floor,Wn=tt.getOwnPropertySymbols,qn=yt?yt.isBuffer:i,zn=t.isFinite,Dn=it.join,Un=Pn(tt.keys,tt),Gn=et.max,Hn=et.min,$n=o.now,Yn=t.parseInt,Xn=et.random,Zn=it.reverse,Qn=Fi(t,"DataView"),Kn=Fi(t,"Map"),Jn=Fi(t,"Promise"),er=Fi(t,"Set"),tr=Fi(t,"WeakMap"),nr=Fi(tt,"create"),rr=tr&&new tr,or={},ir=fa(Qn),ar=fa(Kn),sr=fa(Jn),ur=fa(er),cr=fa(tr),lr=bt?bt.prototype:i,fr=lr?lr.valueOf:i,dr=lr?lr.toString:i;function pr(e){if(ks(e)&&!ys(e)&&!(e instanceof yr)){if(e instanceof gr)return e;if(lt.call(e,"__wrapped__"))return da(e)}return new gr(e)}var vr=function(){function e(){}return function(t){if(!Ps(t))return{};if(Rt)return Rt(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function hr(){}function gr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function yr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=V,this.__views__=[]}function mr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function xr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function br(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new br;++t<n;)this.add(e[t])}function wr(e){var t=this.__data__=new xr(e);this.size=t.size}function Sr(e,t){var n=ys(e),r=!n&&gs(e),o=!n&&!r&&_s(e),i=!n&&!r&&!o&&js(e),a=n||r||o||i,s=a?gn(e.length,rt):[],u=s.length;for(var c in e)!t&&!lt.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Hi(c,u))||s.push(c);return s}function Ir(e){var t=e.length;return t?e[wo(0,t-1)]:i}function Ar(e,t){return ua(ri(e),Or(t,0,e.length))}function Cr(e){return ua(ri(e))}function Pr(e,t,n){(n===i||ps(e[t],n))&&(n!==i||t in e)||Rr(e,t,n)}function kr(e,t,n){var r=e[t];lt.call(e,t)&&ps(r,n)&&(n!==i||t in e)||Rr(e,t,n)}function Br(e,t){for(var n=e.length;n--;)if(ps(e[n][0],t))return n;return-1}function Mr(e,t,n,r){return Fr(e,function(e,o,i){t(r,e,n(e),i)}),r}function Tr(e,t){return e&&oi(t,ou(t),e)}function Rr(e,t,n){"__proto__"==t&&pn?pn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Er(e,t){for(var n=-1,o=t.length,a=r(o),s=null==e;++n<o;)a[n]=s?i:Js(e,t[n]);return a}function Or(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function Nr(e,t,n,r,o,a){var s,u=t&d,c=t&p,l=t&v;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!Ps(e))return e;var f=ys(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&lt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return ri(e,s)}else{var h=zi(e),g=h==Y||h==X;if(_s(e))return Qo(e,u);if(h==J||h==q||g&&!o){if(s=c||g?{}:Ui(e),!u)return c?function(e,t){return oi(e,qi(e),t)}(e,function(e,t){return e&&oi(t,iu(t),e)}(s,e)):function(e,t){return oi(e,Wi(e),t)}(e,Tr(s,e))}else{if(!Pt[h])return o?e:{};s=function(e,t,n){var r,o,i,a=e.constructor;switch(t){case ue:return Ko(e);case U:case G:return new a(+e);case ce:return function(e,t){var n=t?Ko(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case le:case fe:case de:case pe:case ve:case he:case ge:case ye:case me:return Jo(e,n);case Z:return new a;case Q:case re:return new a(e);case te:return(i=new(o=e).constructor(o.source,De.exec(o))).lastIndex=o.lastIndex,i;case ne:return new a;case oe:return r=e,fr?tt(fr.call(r)):{}}}(e,h,u)}}a||(a=new wr);var y=a.get(e);if(y)return y;if(a.set(e,s),Es(e))return e.forEach(function(r){s.add(Nr(r,t,n,r,e,a))}),s;if(Bs(e))return e.forEach(function(r,o){s.set(o,Nr(r,t,n,o,e,a))}),s;var m=f?i:(l?c?Ri:Ti:c?iu:ou)(e);return $t(m||e,function(r,o){m&&(r=e[o=r]),kr(s,o,Nr(r,t,n,o,e,a))}),s}function jr(e,t,n){var r=n.length;if(null==e)return!r;for(e=tt(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function Vr(e,t,n){if("function"!=typeof e)throw new ot(u);return oa(function(){e.apply(i,n)},t)}function Lr(e,t,n,r){var o=-1,i=Qt,s=!0,u=e.length,c=[],l=t.length;if(!u)return c;n&&(t=Jt(t,yn(n))),r?(i=Kt,s=!1):t.length>=a&&(i=xn,s=!1,t=new _r(t));e:for(;++o<u;){var f=e[o],d=null==n?f:n(f);if(f=r||0!==f?f:0,s&&d==d){for(var p=l;p--;)if(t[p]===d)continue e;c.push(f)}else i(t,d,r)||c.push(f)}return c}pr.templateSettings={escape:Ce,evaluate:Pe,interpolate:ke,variable:"",imports:{_:pr}},pr.prototype=hr.prototype,pr.prototype.constructor=pr,gr.prototype=vr(hr.prototype),gr.prototype.constructor=gr,yr.prototype=vr(hr.prototype),yr.prototype.constructor=yr,mr.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},mr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},mr.prototype.get=function(e){var t=this.__data__;if(nr){var n=t[e];return n===c?i:n}return lt.call(t,e)?t[e]:i},mr.prototype.has=function(e){var t=this.__data__;return nr?t[e]!==i:lt.call(t,e)},mr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nr&&t===i?c:t,this},xr.prototype.clear=function(){this.__data__=[],this.size=0},xr.prototype.delete=function(e){var t=this.__data__,n=Br(t,e);return!(n<0||(n==t.length-1?t.pop():Nt.call(t,n,1),--this.size,0))},xr.prototype.get=function(e){var t=this.__data__,n=Br(t,e);return n<0?i:t[n][1]},xr.prototype.has=function(e){return Br(this.__data__,e)>-1},xr.prototype.set=function(e,t){var n=this.__data__,r=Br(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},br.prototype.clear=function(){this.size=0,this.__data__={hash:new mr,map:new(Kn||xr),string:new mr}},br.prototype.delete=function(e){var t=Vi(this,e).delete(e);return this.size-=t?1:0,t},br.prototype.get=function(e){return Vi(this,e).get(e)},br.prototype.has=function(e){return Vi(this,e).has(e)},br.prototype.set=function(e,t){var n=Vi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},_r.prototype.add=_r.prototype.push=function(e){return this.__data__.set(e,c),this},_r.prototype.has=function(e){return this.__data__.has(e)},wr.prototype.clear=function(){this.__data__=new xr,this.size=0},wr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},wr.prototype.get=function(e){return this.__data__.get(e)},wr.prototype.has=function(e){return this.__data__.has(e)},wr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof xr){var r=n.__data__;if(!Kn||r.length<a-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new br(r)}return n.set(e,t),this.size=n.size,this};var Fr=si($r),Wr=si(Yr,!0);function qr(e,t){var n=!0;return Fr(e,function(e,r,o){return n=!!t(e,r,o)}),n}function zr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(u===i?s==s&&!Ns(s):n(s,u)))var u=s,c=a}return c}function Dr(e,t){var n=[];return Fr(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}function Ur(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=Gi),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?Ur(s,t-1,n,r,o):en(o,s):r||(o[o.length]=s)}return o}var Gr=ui(),Hr=ui(!0);function $r(e,t){return e&&Gr(e,t,ou)}function Yr(e,t){return e&&Hr(e,t,ou)}function Xr(e,t){return Zt(t,function(t){return Is(e[t])})}function Zr(e,t){for(var n=0,r=(t=$o(t,e)).length;null!=e&&n<r;)e=e[la(t[n++])];return n&&n==r?e:i}function Qr(e,t,n){var r=t(e);return ys(e)?r:en(r,n(e))}function Kr(e){return null==e?e===i?ie:K:on&&on in tt(e)?function(e){var t=lt.call(e,on),n=e[on];try{e[on]=i;var r=!0}catch(e){}var o=pt.call(e);return r&&(t?e[on]=n:delete e[on]),o}(e):function(e){return pt.call(e)}(e)}function Jr(e,t){return e>t}function eo(e,t){return null!=e&&lt.call(e,t)}function to(e,t){return null!=e&&t in tt(e)}function no(e,t,n){for(var o=n?Kt:Qt,a=e[0].length,s=e.length,u=s,c=r(s),l=1/0,f=[];u--;){var d=e[u];u&&t&&(d=Jt(d,yn(t))),l=Hn(d.length,l),c[u]=!n&&(t||a>=120&&d.length>=120)?new _r(u&&d):i}d=e[0];var p=-1,v=c[0];e:for(;++p<a&&f.length<l;){var h=d[p],g=t?t(h):h;if(h=n||0!==h?h:0,!(v?xn(v,g):o(f,g,n))){for(u=s;--u;){var y=c[u];if(!(y?xn(y,g):o(e[u],g,n)))continue e}v&&v.push(g),f.push(h)}}return f}function ro(e,t,n){var r=null==(e=ta(e,t=$o(t,e)))?e:e[la(Sa(t))];return null==r?i:Gt(r,e,n)}function oo(e){return ks(e)&&Kr(e)==q}function io(e,t,n,r,o){return e===t||(null==e||null==t||!ks(e)&&!ks(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var s=ys(e),u=ys(t),c=s?z:zi(e),l=u?z:zi(t),f=(c=c==q?J:c)==J,d=(l=l==q?J:l)==J,p=c==l;if(p&&_s(e)){if(!_s(t))return!1;s=!0,f=!1}if(p&&!f)return a||(a=new wr),s||js(e)?Bi(e,t,n,r,o,a):function(e,t,n,r,o,i,a){switch(n){case ce:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ue:return!(e.byteLength!=t.byteLength||!i(new wt(e),new wt(t)));case U:case G:case Q:return ps(+e,+t);case $:return e.name==t.name&&e.message==t.message;case te:case re:return e==t+"";case Z:var s=Cn;case ne:var u=r&h;if(s||(s=Bn),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=g,a.set(e,t);var l=Bi(s(e),s(t),r,o,i,a);return a.delete(e),l;case oe:if(fr)return fr.call(e)==fr.call(t)}return!1}(e,t,c,n,r,o,a);if(!(n&h)){var v=f&&lt.call(e,"__wrapped__"),y=d&&lt.call(t,"__wrapped__");if(v||y){var m=v?e.value():e,x=y?t.value():t;return a||(a=new wr),o(m,x,n,r,a)}}return!!p&&(a||(a=new wr),function(e,t,n,r,o,a){var s=n&h,u=Ti(e),c=u.length,l=Ti(t).length;if(c!=l&&!s)return!1;for(var f=c;f--;){var d=u[f];if(!(s?d in t:lt.call(t,d)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var v=!0;a.set(e,t),a.set(t,e);for(var g=s;++f<c;){d=u[f];var y=e[d],m=t[d];if(r)var x=s?r(m,y,d,t,e,a):r(y,m,d,e,t,a);if(!(x===i?y===m||o(y,m,n,r,a):x)){v=!1;break}g||(g="constructor"==d)}if(v&&!g){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(v=!1)}return a.delete(e),a.delete(t),v}(e,t,n,r,o,a))}(e,t,n,r,io,o))}function ao(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=tt(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=n[o])[0],l=e[c],f=u[1];if(s&&u[2]){if(l===i&&!(c in e))return!1}else{var d=new wr;if(r)var p=r(l,f,c,e,t,d);if(!(p===i?io(f,l,h|g,r,d):p))return!1}}return!0}function so(e){return!(!Ps(e)||(t=e,dt&&dt in t))&&(Is(e)?gt:He).test(fa(e));var t}function uo(e){return"function"==typeof e?e:null==e?Mu:"object"==typeof e?ys(e)?ho(e[0],e[1]):vo(e):Fu(e)}function co(e){if(!Qi(e))return Un(e);var t=[];for(var n in tt(e))lt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function lo(e){if(!Ps(e))return function(e){var t=[];if(null!=e)for(var n in tt(e))t.push(n);return t}(e);var t=Qi(e),n=[];for(var r in e)("constructor"!=r||!t&&lt.call(e,r))&&n.push(r);return n}function fo(e,t){return e<t}function po(e,t){var n=-1,o=xs(e)?r(e.length):[];return Fr(e,function(e,r,i){o[++n]=t(e,r,i)}),o}function vo(e){var t=Li(e);return 1==t.length&&t[0][2]?Ji(t[0][0],t[0][1]):function(n){return n===e||ao(n,e,t)}}function ho(e,t){return Yi(e)&&Ki(t)?Ji(la(e),t):function(n){var r=Js(n,e);return r===i&&r===t?eu(n,e):io(t,r,h|g)}}function go(e,t,n,r,o){e!==t&&Gr(t,function(a,s){if(Ps(a))o||(o=new wr),function(e,t,n,r,o,a,s){var u=na(e,n),c=na(t,n),l=s.get(c);if(l)Pr(e,n,l);else{var f=a?a(u,c,n+"",e,t,s):i,d=f===i;if(d){var p=ys(c),v=!p&&_s(c),h=!p&&!v&&js(c);f=c,p||v||h?ys(u)?f=u:bs(u)?f=ri(u):v?(d=!1,f=Qo(c,!0)):h?(d=!1,f=Jo(c,!0)):f=[]:Ts(c)||gs(c)?(f=u,gs(u)?f=Us(u):Ps(u)&&!Is(u)||(f=Ui(c))):d=!1}d&&(s.set(c,f),o(f,c,r,a,s),s.delete(c)),Pr(e,n,f)}}(e,t,s,n,go,r,o);else{var u=r?r(na(e,s),a,s+"",e,t,o):i;u===i&&(u=a),Pr(e,s,u)}},iu)}function yo(e,t){var n=e.length;if(n)return Hi(t+=t<0?n:0,n)?e[t]:i}function mo(e,t,n){var r=-1;return t=Jt(t.length?t:[Mu],yn(ji())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(po(e,function(e,n,o){return{criteria:Jt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var u=ei(o[r],i[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)})}function xo(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=Zr(e,a);n(s,a)&&Po(i,$o(a,e),s)}return i}function bo(e,t,n,r){var o=r?cn:un,i=-1,a=t.length,s=e;for(e===t&&(t=ri(t)),n&&(s=Jt(e,yn(n)));++i<a;)for(var u=0,c=t[i],l=n?n(c):c;(u=o(s,l,u,r))>-1;)s!==e&&Nt.call(s,u,1),Nt.call(e,u,1);return e}function _o(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;Hi(o)?Nt.call(e,o,1):Fo(e,o)}}return e}function wo(e,t){return e+Fn(Xn()*(t-e+1))}function So(e,t){var n="";if(!e||t<1||t>O)return n;do{t%2&&(n+=e),(t=Fn(t/2))&&(e+=e)}while(t);return n}function Io(e,t){return ia(ea(e,t,Mu),e+"")}function Ao(e){return Ir(pu(e))}function Co(e,t){var n=pu(e);return ua(n,Or(t,0,n.length))}function Po(e,t,n,r){if(!Ps(e))return e;for(var o=-1,a=(t=$o(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var c=la(t[o]),l=n;if(o!=s){var f=u[c];(l=r?r(f,c,u):i)===i&&(l=Ps(f)?f:Hi(t[o+1])?[]:{})}kr(u,c,l),u=u[c]}return e}var ko=rr?function(e,t){return rr.set(e,t),e}:Mu,Bo=pn?function(e,t){return pn(e,"toString",{configurable:!0,enumerable:!1,value:Pu(t),writable:!0})}:Mu;function Mo(e){return ua(pu(e))}function To(e,t,n){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=r(i);++o<i;)a[o]=e[o+t];return a}function Ro(e,t){var n;return Fr(e,function(e,r,o){return!(n=t(e,r,o))}),!!n}function Eo(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=F){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!Ns(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return Oo(e,t,Mu,n)}function Oo(e,t,n,r){t=n(t);for(var o=0,a=null==e?0:e.length,s=t!=t,u=null===t,c=Ns(t),l=t===i;o<a;){var f=Fn((o+a)/2),d=n(e[f]),p=d!==i,v=null===d,h=d==d,g=Ns(d);if(s)var y=r||h;else y=l?h&&(r||p):u?h&&p&&(r||!v):c?h&&p&&!v&&(r||!g):!v&&!g&&(r?d<=t:d<t);y?o=f+1:a=f}return Hn(a,L)}function No(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!ps(s,u)){var u=s;i[o++]=0===a?0:a}}return i}function jo(e){return"number"==typeof e?e:Ns(e)?j:+e}function Vo(e){if("string"==typeof e)return e;if(ys(e))return Jt(e,Vo)+"";if(Ns(e))return dr?dr.call(e):"";var t=e+"";return"0"==t&&1/e==-E?"-0":t}function Lo(e,t,n){var r=-1,o=Qt,i=e.length,s=!0,u=[],c=u;if(n)s=!1,o=Kt;else if(i>=a){var l=t?null:Si(e);if(l)return Bn(l);s=!1,o=xn,c=new _r}else c=t?[]:u;e:for(;++r<i;){var f=e[r],d=t?t(f):f;if(f=n||0!==f?f:0,s&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),u.push(f)}else o(c,d,n)||(c!==u&&c.push(d),u.push(f))}return u}function Fo(e,t){return null==(e=ta(e,t=$o(t,e)))||delete e[la(Sa(t))]}function Wo(e,t,n,r){return Po(e,t,n(Zr(e,t)),r)}function qo(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?To(e,r?0:i,r?i+1:o):To(e,r?i+1:0,r?o:i)}function zo(e,t){var n=e;return n instanceof yr&&(n=n.value()),tn(t,function(e,t){return t.func.apply(t.thisArg,en([e],t.args))},n)}function Do(e,t,n){var o=e.length;if(o<2)return o?Lo(e[0]):[];for(var i=-1,a=r(o);++i<o;)for(var s=e[i],u=-1;++u<o;)u!=i&&(a[i]=Lr(a[i]||s,e[u],t,n));return Lo(Ur(a,1),t,n)}function Uo(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var u=r<a?t[r]:i;n(s,e[r],u)}return s}function Go(e){return bs(e)?e:[]}function Ho(e){return"function"==typeof e?e:Mu}function $o(e,t){return ys(e)?e:Yi(e,t)?[e]:ca(Gs(e))}var Yo=Io;function Xo(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:To(e,t,n)}var Zo=Nn||function(e){return Et.clearTimeout(e)};function Qo(e,t){if(t)return e.slice();var n=e.length,r=kt?kt(n):new e.constructor(n);return e.copy(r),r}function Ko(e){var t=new e.constructor(e.byteLength);return new wt(t).set(new wt(e)),t}function Jo(e,t){var n=t?Ko(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ei(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=Ns(e),s=t!==i,u=null===t,c=t==t,l=Ns(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!l&&e<t||l&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function ti(e,t,n,o){for(var i=-1,a=e.length,s=n.length,u=-1,c=t.length,l=Gn(a-s,0),f=r(c+l),d=!o;++u<c;)f[u]=t[u];for(;++i<s;)(d||i<a)&&(f[n[i]]=e[i]);for(;l--;)f[u++]=e[i++];return f}function ni(e,t,n,o){for(var i=-1,a=e.length,s=-1,u=n.length,c=-1,l=t.length,f=Gn(a-u,0),d=r(f+l),p=!o;++i<f;)d[i]=e[i];for(var v=i;++c<l;)d[v+c]=t[c];for(;++s<u;)(p||i<a)&&(d[v+n[s]]=e[i++]);return d}function ri(e,t){var n=-1,o=e.length;for(t||(t=r(o));++n<o;)t[n]=e[n];return t}function oi(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],c=r?r(n[u],e[u],u,n,e):i;c===i&&(c=e[u]),o?Rr(n,u,c):kr(n,u,c)}return n}function ii(e,t){return function(n,r){var o=ys(n)?Ht:Mr,i=t?t():{};return o(n,e,ji(r,2),i)}}function ai(e){return Io(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&$i(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=tt(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}function si(e,t){return function(n,r){if(null==n)return n;if(!xs(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=tt(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function ui(e){return function(t,n,r){for(var o=-1,i=tt(t),a=r(t),s=a.length;s--;){var u=a[e?s:++o];if(!1===n(i[u],u,i))break}return t}}function ci(e){return function(t){var n=An(t=Gs(t))?Rn(t):i,r=n?n[0]:t.charAt(0),o=n?Xo(n,1).join(""):t.slice(1);return r[e]()+o}}function li(e){return function(t){return tn(Iu(gu(t).replace(mt,"")),e,"")}}function fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=vr(e.prototype),r=e.apply(n,t);return Ps(r)?r:n}}function di(e){return function(t,n,r){var o=tt(t);if(!xs(t)){var a=ji(n,3);t=ou(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function pi(e){return Mi(function(t){var n=t.length,r=n,o=gr.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ot(u);if(o&&!s&&"wrapper"==Oi(a))var s=new gr([],!0)}for(r=s?r:n;++r<n;){var c=Oi(a=t[r]),l="wrapper"==c?Ei(a):i;s=l&&Xi(l[0])&&l[1]==(I|b|w|A)&&!l[4].length&&1==l[9]?s[Oi(l[0])].apply(s,l[3]):1==a.length&&Xi(a)?s[c]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&ys(r))return s.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}})}function vi(e,t,n,o,a,s,u,c,l,f){var d=t&I,p=t&y,v=t&m,h=t&(b|_),g=t&C,x=v?i:fi(e);return function y(){for(var m=arguments.length,b=r(m),_=m;_--;)b[_]=arguments[_];if(h)var w=Ni(y),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,w);if(o&&(b=ti(b,o,a,h)),s&&(b=ni(b,s,u,h)),m-=S,h&&m<f){var I=kn(b,w);return _i(e,t,vi,y.placeholder,n,b,I,c,l,f-m)}var A=p?n:this,C=v?A[e]:e;return m=b.length,c?b=function(e,t){for(var n=e.length,r=Hn(t.length,n),o=ri(e);r--;){var a=t[r];e[r]=Hi(a,n)?o[a]:i}return e}(b,c):g&&m>1&&b.reverse(),d&&l<m&&(b.length=l),this&&this!==Et&&this instanceof y&&(C=x||fi(C)),C.apply(A,b)}}function hi(e,t){return function(n,r){return function(e,t,n,r){return $r(e,function(e,o,i){t(r,n(e),o,i)}),r}(n,e,t(r),{})}}function gi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=Vo(n),r=Vo(r)):(n=jo(n),r=jo(r)),o=e(n,r)}return o}}function yi(e){return Mi(function(t){return t=Jt(t,yn(ji())),Io(function(n){var r=this;return e(t,function(e){return Gt(e,r,n)})})})}function mi(e,t){var n=(t=t===i?" ":Vo(t)).length;if(n<2)return n?So(t,e):t;var r=So(t,Ln(e/Tn(t)));return An(t)?Xo(Rn(r),0,e).join(""):r.slice(0,e)}function xi(e){return function(t,n,o){return o&&"number"!=typeof o&&$i(t,n,o)&&(n=o=i),t=Ws(t),n===i?(n=t,t=0):n=Ws(n),function(e,t,n,o){for(var i=-1,a=Gn(Ln((t-e)/(n||1)),0),s=r(a);a--;)s[o?a:++i]=e,e+=n;return s}(t,n,o=o===i?t<n?1:-1:Ws(o),e)}}function bi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Ds(t),n=Ds(n)),e(t,n)}}function _i(e,t,n,r,o,a,s,u,c,l){var f=t&b;t|=f?w:S,(t&=~(f?S:w))&x||(t&=~(y|m));var d=[e,t,o,f?a:i,f?s:i,f?i:a,f?i:s,u,c,l],p=n.apply(i,d);return Xi(e)&&ra(p,d),p.placeholder=r,aa(p,e,t)}function wi(e){var t=et[e];return function(e,n){if(e=Ds(e),n=null==n?0:Hn(qs(n),292)){var r=(Gs(e)+"e").split("e");return+((r=(Gs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Si=er&&1/Bn(new er([,-0]))[1]==E?function(e){return new er(e)}:Nu;function Ii(e){return function(t){var n=zi(t);return n==Z?Cn(t):n==ne?Mn(t):function(e,t){return Jt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ai(e,t,n,o,a,s,c,l){var d=t&m;if(!d&&"function"!=typeof e)throw new ot(u);var p=o?o.length:0;if(p||(t&=~(w|S),o=a=i),c=c===i?c:Gn(qs(c),0),l=l===i?l:qs(l),p-=a?a.length:0,t&S){var v=o,h=a;o=a=i}var g=d?i:Ei(e),C=[e,t,n,o,a,v,h,s,c,l];if(g&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<(y|m|I),a=r==I&&n==b||r==I&&n==A&&e[7].length<=t[8]||r==(I|A)&&t[7].length<=t[8]&&n==b;if(!i&&!a)return e;r&y&&(e[2]=t[2],o|=n&y?0:x);var s=t[3];if(s){var u=e[3];e[3]=u?ti(u,s,t[4]):s,e[4]=u?kn(e[3],f):t[4]}(s=t[5])&&(u=e[5],e[5]=u?ni(u,s,t[6]):s,e[6]=u?kn(e[5],f):t[6]),(s=t[7])&&(e[7]=s),r&I&&(e[8]=null==e[8]?t[8]:Hn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(C,g),e=C[0],t=C[1],n=C[2],o=C[3],a=C[4],!(l=C[9]=C[9]===i?d?0:e.length:Gn(C[9]-p,0))&&t&(b|_)&&(t&=~(b|_)),t&&t!=y)P=t==b||t==_?function(e,t,n){var o=fi(e);return function a(){for(var s=arguments.length,u=r(s),c=s,l=Ni(a);c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:kn(u,l);return(s-=f.length)<n?_i(e,t,vi,a.placeholder,i,u,f,i,i,n-s):Gt(this&&this!==Et&&this instanceof a?o:e,this,u)}}(e,t,l):t!=w&&t!=(y|w)||a.length?vi.apply(i,C):function(e,t,n,o){var i=t&y,a=fi(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=o.length,f=r(l+u),d=this&&this!==Et&&this instanceof t?a:e;++c<l;)f[c]=o[c];for(;u--;)f[c++]=arguments[++s];return Gt(d,i?n:this,f)}}(e,t,n,o);else var P=function(e,t,n){var r=t&y,o=fi(e);return function t(){return(this&&this!==Et&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return aa((g?ko:ra)(P,C),e,t)}function Ci(e,t,n,r){return e===i||ps(e,st[n])&&!lt.call(r,n)?t:e}function Pi(e,t,n,r,o,a){return Ps(e)&&Ps(t)&&(a.set(t,e),go(e,t,i,Pi,a),a.delete(t)),e}function ki(e){return Ts(e)?i:e}function Bi(e,t,n,r,o,a){var s=n&h,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var f=-1,d=!0,p=n&g?new _r:i;for(a.set(e,t),a.set(t,e);++f<u;){var v=e[f],y=t[f];if(r)var m=s?r(y,v,f,t,e,a):r(v,y,f,e,t,a);if(m!==i){if(m)continue;d=!1;break}if(p){if(!rn(t,function(e,t){if(!xn(p,t)&&(v===e||o(v,e,n,r,a)))return p.push(t)})){d=!1;break}}else if(v!==y&&!o(v,y,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function Mi(e){return ia(ea(e,i,ma),e+"")}function Ti(e){return Qr(e,ou,Wi)}function Ri(e){return Qr(e,iu,qi)}var Ei=rr?function(e){return rr.get(e)}:Nu;function Oi(e){for(var t=e.name+"",n=or[t],r=lt.call(or,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function Ni(e){return(lt.call(pr,"placeholder")?pr:e).placeholder}function ji(){var e=pr.iteratee||Tu;return e=e===Tu?uo:e,arguments.length?e(arguments[0],arguments[1]):e}function Vi(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Li(e){for(var t=ou(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Ki(o)]}return t}function Fi(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return so(n)?n:i}var Wi=Wn?function(e){return null==e?[]:(e=tt(e),Zt(Wn(e),function(t){return Ot.call(e,t)}))}:zu,qi=Wn?function(e){for(var t=[];e;)en(t,Wi(e)),e=Tt(e);return t}:zu,zi=Kr;function Di(e,t,n){for(var r=-1,o=(t=$o(t,e)).length,i=!1;++r<o;){var a=la(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Cs(o)&&Hi(a,o)&&(ys(e)||gs(e))}function Ui(e){return"function"!=typeof e.constructor||Qi(e)?{}:vr(Tt(e))}function Gi(e){return ys(e)||gs(e)||!!(Vt&&e&&e[Vt])}function Hi(e,t){var n=typeof e;return!!(t=null==t?O:t)&&("number"==n||"symbol"!=n&&Ye.test(e))&&e>-1&&e%1==0&&e<t}function $i(e,t,n){if(!Ps(n))return!1;var r=typeof t;return!!("number"==r?xs(n)&&Hi(t,n.length):"string"==r&&t in n)&&ps(n[t],e)}function Yi(e,t){if(ys(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ns(e))||Me.test(e)||!Be.test(e)||null!=t&&e in tt(t)}function Xi(e){var t=Oi(e),n=pr[t];if("function"!=typeof n||!(t in yr.prototype))return!1;if(e===n)return!0;var r=Ei(n);return!!r&&e===r[0]}(Qn&&zi(new Qn(new ArrayBuffer(1)))!=ce||Kn&&zi(new Kn)!=Z||Jn&&"[object Promise]"!=zi(Jn.resolve())||er&&zi(new er)!=ne||tr&&zi(new tr)!=ae)&&(zi=function(e){var t=Kr(e),n=t==J?e.constructor:i,r=n?fa(n):"";if(r)switch(r){case ir:return ce;case ar:return Z;case sr:return"[object Promise]";case ur:return ne;case cr:return ae}return t});var Zi=ut?Is:Du;function Qi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)}function Ki(e){return e==e&&!Ps(e)}function Ji(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in tt(n))}}function ea(e,t,n){return t=Gn(t===i?e.length-1:t,0),function(){for(var o=arguments,i=-1,a=Gn(o.length-t,0),s=r(a);++i<a;)s[i]=o[t+i];i=-1;for(var u=r(t+1);++i<t;)u[i]=o[i];return u[t]=n(s),Gt(e,this,u)}}function ta(e,t){return t.length<2?e:Zr(e,To(t,0,-1))}function na(e,t){if("__proto__"!=t)return e[t]}var ra=sa(ko),oa=Vn||function(e,t){return Et.setTimeout(e,t)},ia=sa(Bo);function aa(e,t,n){var r=t+"";return ia(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ve,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return $t(W,function(n){var r="_."+n[0];t&n[1]&&!Qt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(Le);return t?t[1].split(Fe):[]}(r),n)))}function sa(e){var t=0,n=0;return function(){var r=$n(),o=M-(r-n);if(n=r,o>0){if(++t>=B)return arguments[0]}else t=0;return e.apply(i,arguments)}}function ua(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=wo(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var ca=function(e){var t=ss(e,function(e){return n.size===l&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Te,function(e,n,r,o){t.push(r?o.replace(qe,"$1"):n||e)}),t});function la(e){if("string"==typeof e||Ns(e))return e;var t=e+"";return"0"==t&&1/e==-E?"-0":t}function fa(e){if(null!=e){try{return ct.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function da(e){if(e instanceof yr)return e.clone();var t=new gr(e.__wrapped__,e.__chain__);return t.__actions__=ri(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var pa=Io(function(e,t){return bs(e)?Lr(e,Ur(t,1,bs,!0)):[]}),va=Io(function(e,t){var n=Sa(t);return bs(n)&&(n=i),bs(e)?Lr(e,Ur(t,1,bs,!0),ji(n,2)):[]}),ha=Io(function(e,t){var n=Sa(t);return bs(n)&&(n=i),bs(e)?Lr(e,Ur(t,1,bs,!0),i,n):[]});function ga(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:qs(n);return o<0&&(o=Gn(r+o,0)),sn(e,ji(t,3),o)}function ya(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=qs(n),o=n<0?Gn(r+o,0):Hn(o,r-1)),sn(e,ji(t,3),o,!0)}function ma(e){return null!=e&&e.length?Ur(e,1):[]}function xa(e){return e&&e.length?e[0]:i}var ba=Io(function(e){var t=Jt(e,Go);return t.length&&t[0]===e[0]?no(t):[]}),_a=Io(function(e){var t=Sa(e),n=Jt(e,Go);return t===Sa(n)?t=i:n.pop(),n.length&&n[0]===e[0]?no(n,ji(t,2)):[]}),wa=Io(function(e){var t=Sa(e),n=Jt(e,Go);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?no(n,i,t):[]});function Sa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Ia=Io(Aa);function Aa(e,t){return e&&e.length&&t&&t.length?bo(e,t):e}var Ca=Mi(function(e,t){var n=null==e?0:e.length,r=Er(e,t);return _o(e,Jt(t,function(e){return Hi(e,n)?+e:e}).sort(ei)),r});function Pa(e){return null==e?e:Zn.call(e)}var ka=Io(function(e){return Lo(Ur(e,1,bs,!0))}),Ba=Io(function(e){var t=Sa(e);return bs(t)&&(t=i),Lo(Ur(e,1,bs,!0),ji(t,2))}),Ma=Io(function(e){var t=Sa(e);return t="function"==typeof t?t:i,Lo(Ur(e,1,bs,!0),i,t)});function Ta(e){if(!e||!e.length)return[];var t=0;return e=Zt(e,function(e){if(bs(e))return t=Gn(e.length,t),!0}),gn(t,function(t){return Jt(e,dn(t))})}function Ra(e,t){if(!e||!e.length)return[];var n=Ta(e);return null==t?n:Jt(n,function(e){return Gt(t,i,e)})}var Ea=Io(function(e,t){return bs(e)?Lr(e,t):[]}),Oa=Io(function(e){return Do(Zt(e,bs))}),Na=Io(function(e){var t=Sa(e);return bs(t)&&(t=i),Do(Zt(e,bs),ji(t,2))}),ja=Io(function(e){var t=Sa(e);return t="function"==typeof t?t:i,Do(Zt(e,bs),i,t)}),Va=Io(Ta);var La=Io(function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,Ra(e,n)});function Fa(e){var t=pr(e);return t.__chain__=!0,t}function Wa(e,t){return t(e)}var qa=Mi(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Er(t,e)};return!(t>1||this.__actions__.length)&&r instanceof yr&&Hi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Wa,args:[o],thisArg:i}),new gr(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(o)});var za=ii(function(e,t,n){lt.call(e,n)?++e[n]:Rr(e,n,1)});var Da=di(ga),Ua=di(ya);function Ga(e,t){return(ys(e)?$t:Fr)(e,ji(t,3))}function Ha(e,t){return(ys(e)?Yt:Wr)(e,ji(t,3))}var $a=ii(function(e,t,n){lt.call(e,n)?e[n].push(t):Rr(e,n,[t])});var Ya=Io(function(e,t,n){var o=-1,i="function"==typeof t,a=xs(e)?r(e.length):[];return Fr(e,function(e){a[++o]=i?Gt(t,e,n):ro(e,t,n)}),a}),Xa=ii(function(e,t,n){Rr(e,n,t)});function Za(e,t){return(ys(e)?Jt:po)(e,ji(t,3))}var Qa=ii(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var Ka=Io(function(e,t){if(null==e)return[];var n=t.length;return n>1&&$i(e,t[0],t[1])?t=[]:n>2&&$i(t[0],t[1],t[2])&&(t=[t[0]]),mo(e,Ur(t,1),[])}),Ja=jn||function(){return Et.Date.now()};function es(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ai(e,I,i,i,i,i,t)}function ts(e,t){var n;if("function"!=typeof t)throw new ot(u);return e=qs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var ns=Io(function(e,t,n){var r=y;if(n.length){var o=kn(n,Ni(ns));r|=w}return Ai(e,r,t,n,o)}),rs=Io(function(e,t,n){var r=y|m;if(n.length){var o=kn(n,Ni(rs));r|=w}return Ai(t,r,e,n,o)});function os(e,t,n){var r,o,a,s,c,l,f=0,d=!1,p=!1,v=!0;if("function"!=typeof e)throw new ot(u);function h(t){var n=r,a=o;return r=o=i,f=t,s=e.apply(a,n)}function g(e){var n=e-l;return l===i||n>=t||n<0||p&&e-f>=a}function y(){var e=Ja();if(g(e))return m(e);c=oa(y,function(e){var n=t-(e-l);return p?Hn(n,a-(e-f)):n}(e))}function m(e){return c=i,v&&r?h(e):(r=o=i,s)}function x(){var e=Ja(),n=g(e);if(r=arguments,o=this,l=e,n){if(c===i)return function(e){return f=e,c=oa(y,t),d?h(e):s}(l);if(p)return c=oa(y,t),h(l)}return c===i&&(c=oa(y,t)),s}return t=Ds(t)||0,Ps(n)&&(d=!!n.leading,a=(p="maxWait"in n)?Gn(Ds(n.maxWait)||0,t):a,v="trailing"in n?!!n.trailing:v),x.cancel=function(){c!==i&&Zo(c),f=0,r=l=o=c=i},x.flush=function(){return c===i?s:m(Ja())},x}var is=Io(function(e,t){return Vr(e,1,t)}),as=Io(function(e,t,n){return Vr(e,Ds(t)||0,n)});function ss(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ot(u);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(ss.Cache||br),n}function us(e){if("function"!=typeof e)throw new ot(u);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ss.Cache=br;var cs=Yo(function(e,t){var n=(t=1==t.length&&ys(t[0])?Jt(t[0],yn(ji())):Jt(Ur(t,1),yn(ji()))).length;return Io(function(r){for(var o=-1,i=Hn(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return Gt(e,this,r)})}),ls=Io(function(e,t){var n=kn(t,Ni(ls));return Ai(e,w,i,t,n)}),fs=Io(function(e,t){var n=kn(t,Ni(fs));return Ai(e,S,i,t,n)}),ds=Mi(function(e,t){return Ai(e,A,i,i,i,t)});function ps(e,t){return e===t||e!=e&&t!=t}var vs=bi(Jr),hs=bi(function(e,t){return e>=t}),gs=oo(function(){return arguments}())?oo:function(e){return ks(e)&&lt.call(e,"callee")&&!Ot.call(e,"callee")},ys=r.isArray,ms=Ft?yn(Ft):function(e){return ks(e)&&Kr(e)==ue};function xs(e){return null!=e&&Cs(e.length)&&!Is(e)}function bs(e){return ks(e)&&xs(e)}var _s=qn||Du,ws=Wt?yn(Wt):function(e){return ks(e)&&Kr(e)==G};function Ss(e){if(!ks(e))return!1;var t=Kr(e);return t==$||t==H||"string"==typeof e.message&&"string"==typeof e.name&&!Ts(e)}function Is(e){if(!Ps(e))return!1;var t=Kr(e);return t==Y||t==X||t==D||t==ee}function As(e){return"number"==typeof e&&e==qs(e)}function Cs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=O}function Ps(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ks(e){return null!=e&&"object"==typeof e}var Bs=qt?yn(qt):function(e){return ks(e)&&zi(e)==Z};function Ms(e){return"number"==typeof e||ks(e)&&Kr(e)==Q}function Ts(e){if(!ks(e)||Kr(e)!=J)return!1;var t=Tt(e);if(null===t)return!0;var n=lt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ct.call(n)==vt}var Rs=zt?yn(zt):function(e){return ks(e)&&Kr(e)==te};var Es=Dt?yn(Dt):function(e){return ks(e)&&zi(e)==ne};function Os(e){return"string"==typeof e||!ys(e)&&ks(e)&&Kr(e)==re}function Ns(e){return"symbol"==typeof e||ks(e)&&Kr(e)==oe}var js=Ut?yn(Ut):function(e){return ks(e)&&Cs(e.length)&&!!Ct[Kr(e)]};var Vs=bi(fo),Ls=bi(function(e,t){return e<=t});function Fs(e){if(!e)return[];if(xs(e))return Os(e)?Rn(e):ri(e);if(Lt&&e[Lt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Lt]());var t=zi(e);return(t==Z?Cn:t==ne?Bn:pu)(e)}function Ws(e){return e?(e=Ds(e))===E||e===-E?(e<0?-1:1)*N:e==e?e:0:0===e?e:0}function qs(e){var t=Ws(e),n=t%1;return t==t?n?t-n:t:0}function zs(e){return e?Or(qs(e),0,V):0}function Ds(e){if("number"==typeof e)return e;if(Ns(e))return j;if(Ps(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ps(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Oe,"");var n=Ge.test(e);return n||$e.test(e)?Mt(e.slice(2),n?2:8):Ue.test(e)?j:+e}function Us(e){return oi(e,iu(e))}function Gs(e){return null==e?"":Vo(e)}var Hs=ai(function(e,t){if(Qi(t)||xs(t))oi(t,ou(t),e);else for(var n in t)lt.call(t,n)&&kr(e,n,t[n])}),$s=ai(function(e,t){oi(t,iu(t),e)}),Ys=ai(function(e,t,n,r){oi(t,iu(t),e,r)}),Xs=ai(function(e,t,n,r){oi(t,ou(t),e,r)}),Zs=Mi(Er);var Qs=Io(function(e,t){e=tt(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&$i(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=iu(a),u=-1,c=s.length;++u<c;){var l=s[u],f=e[l];(f===i||ps(f,st[l])&&!lt.call(e,l))&&(e[l]=a[l])}return e}),Ks=Io(function(e){return e.push(i,Pi),Gt(su,i,e)});function Js(e,t,n){var r=null==e?i:Zr(e,t);return r===i?n:r}function eu(e,t){return null!=e&&Di(e,t,to)}var tu=hi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=pt.call(t)),e[t]=n},Pu(Mu)),nu=hi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=pt.call(t)),lt.call(e,t)?e[t].push(n):e[t]=[n]},ji),ru=Io(ro);function ou(e){return xs(e)?Sr(e):co(e)}function iu(e){return xs(e)?Sr(e,!0):lo(e)}var au=ai(function(e,t,n){go(e,t,n)}),su=ai(function(e,t,n,r){go(e,t,n,r)}),uu=Mi(function(e,t){var n={};if(null==e)return n;var r=!1;t=Jt(t,function(t){return t=$o(t,e),r||(r=t.length>1),t}),oi(e,Ri(e),n),r&&(n=Nr(n,d|p|v,ki));for(var o=t.length;o--;)Fo(n,t[o]);return n});var cu=Mi(function(e,t){return null==e?{}:function(e,t){return xo(e,t,function(t,n){return eu(e,n)})}(e,t)});function lu(e,t){if(null==e)return{};var n=Jt(Ri(e),function(e){return[e]});return t=ji(t),xo(e,n,function(e,n){return t(e,n[0])})}var fu=Ii(ou),du=Ii(iu);function pu(e){return null==e?[]:mn(e,ou(e))}var vu=li(function(e,t,n){return t=t.toLowerCase(),e+(n?hu(t):t)});function hu(e){return Su(Gs(e).toLowerCase())}function gu(e){return(e=Gs(e))&&e.replace(Xe,wn).replace(xt,"")}var yu=li(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),mu=li(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),xu=ci("toLowerCase");var bu=li(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var _u=li(function(e,t,n){return e+(n?" ":"")+Su(t)});var wu=li(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Su=ci("toUpperCase");function Iu(e,t,n){return e=Gs(e),(t=n?i:t)===i?function(e){return St.test(e)}(e)?function(e){return e.match(_t)||[]}(e):function(e){return e.match(We)||[]}(e):e.match(t)||[]}var Au=Io(function(e,t){try{return Gt(e,i,t)}catch(e){return Ss(e)?e:new Ke(e)}}),Cu=Mi(function(e,t){return $t(t,function(t){t=la(t),Rr(e,t,ns(e[t],e))}),e});function Pu(e){return function(){return e}}var ku=pi(),Bu=pi(!0);function Mu(e){return e}function Tu(e){return uo("function"==typeof e?e:Nr(e,d))}var Ru=Io(function(e,t){return function(n){return ro(n,e,t)}}),Eu=Io(function(e,t){return function(n){return ro(e,n,t)}});function Ou(e,t,n){var r=ou(t),o=Xr(t,r);null!=n||Ps(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=Xr(t,ou(t)));var i=!(Ps(n)&&"chain"in n&&!n.chain),a=Is(e);return $t(o,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=ri(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,en([this.value()],arguments))})}),e}function Nu(){}var ju=yi(Jt),Vu=yi(Xt),Lu=yi(rn);function Fu(e){return Yi(e)?dn(la(e)):function(e){return function(t){return Zr(t,e)}}(e)}var Wu=xi(),qu=xi(!0);function zu(){return[]}function Du(){return!1}var Uu=gi(function(e,t){return e+t},0),Gu=wi("ceil"),Hu=gi(function(e,t){return e/t},1),$u=wi("floor");var Yu,Xu=gi(function(e,t){return e*t},1),Zu=wi("round"),Qu=gi(function(e,t){return e-t},0);return pr.after=function(e,t){if("function"!=typeof t)throw new ot(u);return e=qs(e),function(){if(--e<1)return t.apply(this,arguments)}},pr.ary=es,pr.assign=Hs,pr.assignIn=$s,pr.assignInWith=Ys,pr.assignWith=Xs,pr.at=Zs,pr.before=ts,pr.bind=ns,pr.bindAll=Cu,pr.bindKey=rs,pr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return ys(e)?e:[e]},pr.chain=Fa,pr.chunk=function(e,t,n){t=(n?$i(e,t,n):t===i)?1:Gn(qs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,u=r(Ln(o/t));a<o;)u[s++]=To(e,a,a+=t);return u},pr.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},pr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return en(ys(n)?ri(n):[n],Ur(t,1))},pr.cond=function(e){var t=null==e?0:e.length,n=ji();return e=t?Jt(e,function(e){if("function"!=typeof e[1])throw new ot(u);return[n(e[0]),e[1]]}):[],Io(function(n){for(var r=-1;++r<t;){var o=e[r];if(Gt(o[0],this,n))return Gt(o[1],this,n)}})},pr.conforms=function(e){return function(e){var t=ou(e);return function(n){return jr(n,e,t)}}(Nr(e,d))},pr.constant=Pu,pr.countBy=za,pr.create=function(e,t){var n=vr(e);return null==t?n:Tr(n,t)},pr.curry=function e(t,n,r){var o=Ai(t,b,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},pr.curryRight=function e(t,n,r){var o=Ai(t,_,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},pr.debounce=os,pr.defaults=Qs,pr.defaultsDeep=Ks,pr.defer=is,pr.delay=as,pr.difference=pa,pr.differenceBy=va,pr.differenceWith=ha,pr.drop=function(e,t,n){var r=null==e?0:e.length;return r?To(e,(t=n||t===i?1:qs(t))<0?0:t,r):[]},pr.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?To(e,0,(t=r-(t=n||t===i?1:qs(t)))<0?0:t):[]},pr.dropRightWhile=function(e,t){return e&&e.length?qo(e,ji(t,3),!0,!0):[]},pr.dropWhile=function(e,t){return e&&e.length?qo(e,ji(t,3),!0):[]},pr.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&$i(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=qs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:qs(r))<0&&(r+=o),r=n>r?0:zs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},pr.filter=function(e,t){return(ys(e)?Zt:Dr)(e,ji(t,3))},pr.flatMap=function(e,t){return Ur(Za(e,t),1)},pr.flatMapDeep=function(e,t){return Ur(Za(e,t),E)},pr.flatMapDepth=function(e,t,n){return n=n===i?1:qs(n),Ur(Za(e,t),n)},pr.flatten=ma,pr.flattenDeep=function(e){return null!=e&&e.length?Ur(e,E):[]},pr.flattenDepth=function(e,t){return null!=e&&e.length?Ur(e,t=t===i?1:qs(t)):[]},pr.flip=function(e){return Ai(e,C)},pr.flow=ku,pr.flowRight=Bu,pr.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},pr.functions=function(e){return null==e?[]:Xr(e,ou(e))},pr.functionsIn=function(e){return null==e?[]:Xr(e,iu(e))},pr.groupBy=$a,pr.initial=function(e){return null!=e&&e.length?To(e,0,-1):[]},pr.intersection=ba,pr.intersectionBy=_a,pr.intersectionWith=wa,pr.invert=tu,pr.invertBy=nu,pr.invokeMap=Ya,pr.iteratee=Tu,pr.keyBy=Xa,pr.keys=ou,pr.keysIn=iu,pr.map=Za,pr.mapKeys=function(e,t){var n={};return t=ji(t,3),$r(e,function(e,r,o){Rr(n,t(e,r,o),e)}),n},pr.mapValues=function(e,t){var n={};return t=ji(t,3),$r(e,function(e,r,o){Rr(n,r,t(e,r,o))}),n},pr.matches=function(e){return vo(Nr(e,d))},pr.matchesProperty=function(e,t){return ho(e,Nr(t,d))},pr.memoize=ss,pr.merge=au,pr.mergeWith=su,pr.method=Ru,pr.methodOf=Eu,pr.mixin=Ou,pr.negate=us,pr.nthArg=function(e){return e=qs(e),Io(function(t){return yo(t,e)})},pr.omit=uu,pr.omitBy=function(e,t){return lu(e,us(ji(t)))},pr.once=function(e){return ts(2,e)},pr.orderBy=function(e,t,n,r){return null==e?[]:(ys(t)||(t=null==t?[]:[t]),ys(n=r?i:n)||(n=null==n?[]:[n]),mo(e,t,n))},pr.over=ju,pr.overArgs=cs,pr.overEvery=Vu,pr.overSome=Lu,pr.partial=ls,pr.partialRight=fs,pr.partition=Qa,pr.pick=cu,pr.pickBy=lu,pr.property=Fu,pr.propertyOf=function(e){return function(t){return null==e?i:Zr(e,t)}},pr.pull=Ia,pr.pullAll=Aa,pr.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?bo(e,t,ji(n,2)):e},pr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?bo(e,t,i,n):e},pr.pullAt=Ca,pr.range=Wu,pr.rangeRight=qu,pr.rearg=ds,pr.reject=function(e,t){return(ys(e)?Zt:Dr)(e,us(ji(t,3)))},pr.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=ji(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return _o(e,o),n},pr.rest=function(e,t){if("function"!=typeof e)throw new ot(u);return Io(e,t=t===i?t:qs(t))},pr.reverse=Pa,pr.sampleSize=function(e,t,n){return t=(n?$i(e,t,n):t===i)?1:qs(t),(ys(e)?Ar:Co)(e,t)},pr.set=function(e,t,n){return null==e?e:Po(e,t,n)},pr.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Po(e,t,n,r)},pr.shuffle=function(e){return(ys(e)?Cr:Mo)(e)},pr.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&$i(e,t,n)?(t=0,n=r):(t=null==t?0:qs(t),n=n===i?r:qs(n)),To(e,t,n)):[]},pr.sortBy=Ka,pr.sortedUniq=function(e){return e&&e.length?No(e):[]},pr.sortedUniqBy=function(e,t){return e&&e.length?No(e,ji(t,2)):[]},pr.split=function(e,t,n){return n&&"number"!=typeof n&&$i(e,t,n)&&(t=n=i),(n=n===i?V:n>>>0)?(e=Gs(e))&&("string"==typeof t||null!=t&&!Rs(t))&&!(t=Vo(t))&&An(e)?Xo(Rn(e),0,n):e.split(t,n):[]},pr.spread=function(e,t){if("function"!=typeof e)throw new ot(u);return t=null==t?0:Gn(qs(t),0),Io(function(n){var r=n[t],o=Xo(n,0,t);return r&&en(o,r),Gt(e,this,o)})},pr.tail=function(e){var t=null==e?0:e.length;return t?To(e,1,t):[]},pr.take=function(e,t,n){return e&&e.length?To(e,0,(t=n||t===i?1:qs(t))<0?0:t):[]},pr.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?To(e,(t=r-(t=n||t===i?1:qs(t)))<0?0:t,r):[]},pr.takeRightWhile=function(e,t){return e&&e.length?qo(e,ji(t,3),!1,!0):[]},pr.takeWhile=function(e,t){return e&&e.length?qo(e,ji(t,3)):[]},pr.tap=function(e,t){return t(e),e},pr.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new ot(u);return Ps(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),os(e,t,{leading:r,maxWait:t,trailing:o})},pr.thru=Wa,pr.toArray=Fs,pr.toPairs=fu,pr.toPairsIn=du,pr.toPath=function(e){return ys(e)?Jt(e,la):Ns(e)?[e]:ri(ca(Gs(e)))},pr.toPlainObject=Us,pr.transform=function(e,t,n){var r=ys(e),o=r||_s(e)||js(e);if(t=ji(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:Ps(e)&&Is(i)?vr(Tt(e)):{}}return(o?$t:$r)(e,function(e,r,o){return t(n,e,r,o)}),n},pr.unary=function(e){return es(e,1)},pr.union=ka,pr.unionBy=Ba,pr.unionWith=Ma,pr.uniq=function(e){return e&&e.length?Lo(e):[]},pr.uniqBy=function(e,t){return e&&e.length?Lo(e,ji(t,2)):[]},pr.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?Lo(e,i,t):[]},pr.unset=function(e,t){return null==e||Fo(e,t)},pr.unzip=Ta,pr.unzipWith=Ra,pr.update=function(e,t,n){return null==e?e:Wo(e,t,Ho(n))},pr.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Wo(e,t,Ho(n),r)},pr.values=pu,pr.valuesIn=function(e){return null==e?[]:mn(e,iu(e))},pr.without=Ea,pr.words=Iu,pr.wrap=function(e,t){return ls(Ho(t),e)},pr.xor=Oa,pr.xorBy=Na,pr.xorWith=ja,pr.zip=Va,pr.zipObject=function(e,t){return Uo(e||[],t||[],kr)},pr.zipObjectDeep=function(e,t){return Uo(e||[],t||[],Po)},pr.zipWith=La,pr.entries=fu,pr.entriesIn=du,pr.extend=$s,pr.extendWith=Ys,Ou(pr,pr),pr.add=Uu,pr.attempt=Au,pr.camelCase=vu,pr.capitalize=hu,pr.ceil=Gu,pr.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=Ds(n))==n?n:0),t!==i&&(t=(t=Ds(t))==t?t:0),Or(Ds(e),t,n)},pr.clone=function(e){return Nr(e,v)},pr.cloneDeep=function(e){return Nr(e,d|v)},pr.cloneDeepWith=function(e,t){return Nr(e,d|v,t="function"==typeof t?t:i)},pr.cloneWith=function(e,t){return Nr(e,v,t="function"==typeof t?t:i)},pr.conformsTo=function(e,t){return null==t||jr(e,t,ou(t))},pr.deburr=gu,pr.defaultTo=function(e,t){return null==e||e!=e?t:e},pr.divide=Hu,pr.endsWith=function(e,t,n){e=Gs(e),t=Vo(t);var r=e.length,o=n=n===i?r:Or(qs(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},pr.eq=ps,pr.escape=function(e){return(e=Gs(e))&&Ae.test(e)?e.replace(Se,Sn):e},pr.escapeRegExp=function(e){return(e=Gs(e))&&Ee.test(e)?e.replace(Re,"\\$&"):e},pr.every=function(e,t,n){var r=ys(e)?Xt:qr;return n&&$i(e,t,n)&&(t=i),r(e,ji(t,3))},pr.find=Da,pr.findIndex=ga,pr.findKey=function(e,t){return an(e,ji(t,3),$r)},pr.findLast=Ua,pr.findLastIndex=ya,pr.findLastKey=function(e,t){return an(e,ji(t,3),Yr)},pr.floor=$u,pr.forEach=Ga,pr.forEachRight=Ha,pr.forIn=function(e,t){return null==e?e:Gr(e,ji(t,3),iu)},pr.forInRight=function(e,t){return null==e?e:Hr(e,ji(t,3),iu)},pr.forOwn=function(e,t){return e&&$r(e,ji(t,3))},pr.forOwnRight=function(e,t){return e&&Yr(e,ji(t,3))},pr.get=Js,pr.gt=vs,pr.gte=hs,pr.has=function(e,t){return null!=e&&Di(e,t,eo)},pr.hasIn=eu,pr.head=xa,pr.identity=Mu,pr.includes=function(e,t,n,r){e=xs(e)?e:pu(e),n=n&&!r?qs(n):0;var o=e.length;return n<0&&(n=Gn(o+n,0)),Os(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&un(e,t,n)>-1},pr.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:qs(n);return o<0&&(o=Gn(r+o,0)),un(e,t,o)},pr.inRange=function(e,t,n){return t=Ws(t),n===i?(n=t,t=0):n=Ws(n),function(e,t,n){return e>=Hn(t,n)&&e<Gn(t,n)}(e=Ds(e),t,n)},pr.invoke=ru,pr.isArguments=gs,pr.isArray=ys,pr.isArrayBuffer=ms,pr.isArrayLike=xs,pr.isArrayLikeObject=bs,pr.isBoolean=function(e){return!0===e||!1===e||ks(e)&&Kr(e)==U},pr.isBuffer=_s,pr.isDate=ws,pr.isElement=function(e){return ks(e)&&1===e.nodeType&&!Ts(e)},pr.isEmpty=function(e){if(null==e)return!0;if(xs(e)&&(ys(e)||"string"==typeof e||"function"==typeof e.splice||_s(e)||js(e)||gs(e)))return!e.length;var t=zi(e);if(t==Z||t==ne)return!e.size;if(Qi(e))return!co(e).length;for(var n in e)if(lt.call(e,n))return!1;return!0},pr.isEqual=function(e,t){return io(e,t)},pr.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?io(e,t,i,n):!!r},pr.isError=Ss,pr.isFinite=function(e){return"number"==typeof e&&zn(e)},pr.isFunction=Is,pr.isInteger=As,pr.isLength=Cs,pr.isMap=Bs,pr.isMatch=function(e,t){return e===t||ao(e,t,Li(t))},pr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,ao(e,t,Li(t),n)},pr.isNaN=function(e){return Ms(e)&&e!=+e},pr.isNative=function(e){if(Zi(e))throw new Ke(s);return so(e)},pr.isNil=function(e){return null==e},pr.isNull=function(e){return null===e},pr.isNumber=Ms,pr.isObject=Ps,pr.isObjectLike=ks,pr.isPlainObject=Ts,pr.isRegExp=Rs,pr.isSafeInteger=function(e){return As(e)&&e>=-O&&e<=O},pr.isSet=Es,pr.isString=Os,pr.isSymbol=Ns,pr.isTypedArray=js,pr.isUndefined=function(e){return e===i},pr.isWeakMap=function(e){return ks(e)&&zi(e)==ae},pr.isWeakSet=function(e){return ks(e)&&Kr(e)==se},pr.join=function(e,t){return null==e?"":Dn.call(e,t)},pr.kebabCase=yu,pr.last=Sa,pr.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=qs(n))<0?Gn(r+o,0):Hn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):sn(e,ln,o,!0)},pr.lowerCase=mu,pr.lowerFirst=xu,pr.lt=Vs,pr.lte=Ls,pr.max=function(e){return e&&e.length?zr(e,Mu,Jr):i},pr.maxBy=function(e,t){return e&&e.length?zr(e,ji(t,2),Jr):i},pr.mean=function(e){return fn(e,Mu)},pr.meanBy=function(e,t){return fn(e,ji(t,2))},pr.min=function(e){return e&&e.length?zr(e,Mu,fo):i},pr.minBy=function(e,t){return e&&e.length?zr(e,ji(t,2),fo):i},pr.stubArray=zu,pr.stubFalse=Du,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Xu,pr.nth=function(e,t){return e&&e.length?yo(e,qs(t)):i},pr.noConflict=function(){return Et._===this&&(Et._=ht),this},pr.noop=Nu,pr.now=Ja,pr.pad=function(e,t,n){e=Gs(e);var r=(t=qs(t))?Tn(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return mi(Fn(o),n)+e+mi(Ln(o),n)},pr.padEnd=function(e,t,n){e=Gs(e);var r=(t=qs(t))?Tn(e):0;return t&&r<t?e+mi(t-r,n):e},pr.padStart=function(e,t,n){e=Gs(e);var r=(t=qs(t))?Tn(e):0;return t&&r<t?mi(t-r,n)+e:e},pr.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Yn(Gs(e).replace(Ne,""),t||0)},pr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&$i(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=Ws(e),t===i?(t=e,e=0):t=Ws(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Xn();return Hn(e+o*(t-e+Bt("1e-"+((o+"").length-1))),t)}return wo(e,t)},pr.reduce=function(e,t,n){var r=ys(e)?tn:vn,o=arguments.length<3;return r(e,ji(t,4),n,o,Fr)},pr.reduceRight=function(e,t,n){var r=ys(e)?nn:vn,o=arguments.length<3;return r(e,ji(t,4),n,o,Wr)},pr.repeat=function(e,t,n){return t=(n?$i(e,t,n):t===i)?1:qs(t),So(Gs(e),t)},pr.replace=function(){var e=arguments,t=Gs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},pr.result=function(e,t,n){var r=-1,o=(t=$o(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[la(t[r])];a===i&&(r=o,a=n),e=Is(a)?a.call(e):a}return e},pr.round=Zu,pr.runInContext=e,pr.sample=function(e){return(ys(e)?Ir:Ao)(e)},pr.size=function(e){if(null==e)return 0;if(xs(e))return Os(e)?Tn(e):e.length;var t=zi(e);return t==Z||t==ne?e.size:co(e).length},pr.snakeCase=bu,pr.some=function(e,t,n){var r=ys(e)?rn:Ro;return n&&$i(e,t,n)&&(t=i),r(e,ji(t,3))},pr.sortedIndex=function(e,t){return Eo(e,t)},pr.sortedIndexBy=function(e,t,n){return Oo(e,t,ji(n,2))},pr.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Eo(e,t);if(r<n&&ps(e[r],t))return r}return-1},pr.sortedLastIndex=function(e,t){return Eo(e,t,!0)},pr.sortedLastIndexBy=function(e,t,n){return Oo(e,t,ji(n,2),!0)},pr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Eo(e,t,!0)-1;if(ps(e[n],t))return n}return-1},pr.startCase=_u,pr.startsWith=function(e,t,n){return e=Gs(e),n=null==n?0:Or(qs(n),0,e.length),t=Vo(t),e.slice(n,n+t.length)==t},pr.subtract=Qu,pr.sum=function(e){return e&&e.length?hn(e,Mu):0},pr.sumBy=function(e,t){return e&&e.length?hn(e,ji(t,2)):0},pr.template=function(e,t,n){var r=pr.templateSettings;n&&$i(e,t,n)&&(t=i),e=Gs(e),t=Ys({},t,r,Ci);var o,a,s=Ys({},t.imports,r.imports,Ci),u=ou(s),c=mn(s,u),l=0,f=t.interpolate||Ze,d="__p += '",p=nt((t.escape||Ze).source+"|"+f.source+"|"+(f===ke?ze:Ze).source+"|"+(t.evaluate||Ze).source+"|$","g"),v="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++At+"]")+"\n";e.replace(p,function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(l,u).replace(Qe,In),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),d+="';\n";var h=t.variable;h||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(xe,""):d).replace(be,"$1").replace(_e,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Au(function(){return Je(u,v+"return "+d).apply(i,c)});if(g.source=d,Ss(g))throw g;return g},pr.times=function(e,t){if((e=qs(e))<1||e>O)return[];var n=V,r=Hn(e,V);t=ji(t),e-=V;for(var o=gn(r,t);++n<e;)t(n);return o},pr.toFinite=Ws,pr.toInteger=qs,pr.toLength=zs,pr.toLower=function(e){return Gs(e).toLowerCase()},pr.toNumber=Ds,pr.toSafeInteger=function(e){return e?Or(qs(e),-O,O):0===e?e:0},pr.toString=Gs,pr.toUpper=function(e){return Gs(e).toUpperCase()},pr.trim=function(e,t,n){if((e=Gs(e))&&(n||t===i))return e.replace(Oe,"");if(!e||!(t=Vo(t)))return e;var r=Rn(e),o=Rn(t);return Xo(r,bn(r,o),_n(r,o)+1).join("")},pr.trimEnd=function(e,t,n){if((e=Gs(e))&&(n||t===i))return e.replace(je,"");if(!e||!(t=Vo(t)))return e;var r=Rn(e);return Xo(r,0,_n(r,Rn(t))+1).join("")},pr.trimStart=function(e,t,n){if((e=Gs(e))&&(n||t===i))return e.replace(Ne,"");if(!e||!(t=Vo(t)))return e;var r=Rn(e);return Xo(r,bn(r,Rn(t))).join("")},pr.truncate=function(e,t){var n=P,r=k;if(Ps(t)){var o="separator"in t?t.separator:o;n="length"in t?qs(t.length):n,r="omission"in t?Vo(t.omission):r}var a=(e=Gs(e)).length;if(An(e)){var s=Rn(e);a=s.length}if(n>=a)return e;var u=n-Tn(r);if(u<1)return r;var c=s?Xo(s,0,u).join(""):e.slice(0,u);if(o===i)return c+r;if(s&&(u+=c.length-u),Rs(o)){if(e.slice(u).search(o)){var l,f=c;for(o.global||(o=nt(o.source,Gs(De.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var d=l.index;c=c.slice(0,d===i?u:d)}}else if(e.indexOf(Vo(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},pr.unescape=function(e){return(e=Gs(e))&&Ie.test(e)?e.replace(we,En):e},pr.uniqueId=function(e){var t=++ft;return Gs(e)+t},pr.upperCase=wu,pr.upperFirst=Su,pr.each=Ga,pr.eachRight=Ha,pr.first=xa,Ou(pr,(Yu={},$r(pr,function(e,t){lt.call(pr.prototype,t)||(Yu[t]=e)}),Yu),{chain:!1}),pr.VERSION="4.17.11",$t(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){pr[e].placeholder=pr}),$t(["drop","take"],function(e,t){yr.prototype[e]=function(n){n=n===i?1:Gn(qs(n),0);var r=this.__filtered__&&!t?new yr(this):this.clone();return r.__filtered__?r.__takeCount__=Hn(n,r.__takeCount__):r.__views__.push({size:Hn(n,V),type:e+(r.__dir__<0?"Right":"")}),r},yr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),$t(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==T||3==n;yr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ji(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),$t(["head","last"],function(e,t){var n="take"+(t?"Right":"");yr.prototype[e]=function(){return this[n](1).value()[0]}}),$t(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");yr.prototype[e]=function(){return this.__filtered__?new yr(this):this[n](1)}}),yr.prototype.compact=function(){return this.filter(Mu)},yr.prototype.find=function(e){return this.filter(e).head()},yr.prototype.findLast=function(e){return this.reverse().find(e)},yr.prototype.invokeMap=Io(function(e,t){return"function"==typeof e?new yr(this):this.map(function(n){return ro(n,e,t)})}),yr.prototype.reject=function(e){return this.filter(us(ji(e)))},yr.prototype.slice=function(e,t){e=qs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new yr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=qs(t))<0?n.dropRight(-t):n.take(t-e)),n)},yr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},yr.prototype.toArray=function(){return this.take(V)},$r(yr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=pr[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(pr.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof yr,c=s[0],l=u||ys(t),f=function(e){var t=o.apply(pr,en([e],s));return r&&d?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var d=this.__chain__,p=!!this.__actions__.length,v=a&&!d,h=u&&!p;if(!a&&l){t=h?t:new yr(this);var g=e.apply(t,s);return g.__actions__.push({func:Wa,args:[f],thisArg:i}),new gr(g,d)}return v&&h?e.apply(this,s):(g=this.thru(f),v?r?g.value()[0]:g.value():g)})}),$t(["pop","push","shift","sort","splice","unshift"],function(e){var t=it[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);pr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(ys(o)?o:[],e)}return this[n](function(n){return t.apply(ys(n)?n:[],e)})}}),$r(yr.prototype,function(e,t){var n=pr[t];if(n){var r=n.name+"";(or[r]||(or[r]=[])).push({name:t,func:n})}}),or[vi(i,m).name]=[{name:"wrapper",func:i}],yr.prototype.clone=function(){var e=new yr(this.__wrapped__);return e.__actions__=ri(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ri(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ri(this.__views__),e},yr.prototype.reverse=function(){if(this.__filtered__){var e=new yr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},yr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=ys(e),r=t<0,o=n?e.length:0,i=function(e,t,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Hn(t,e+a);break;case"takeRight":e=Gn(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,s=i.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,d=0,p=Hn(u,this.__takeCount__);if(!n||!r&&o==u&&p==u)return zo(e,this.__actions__);var v=[];e:for(;u--&&d<p;){for(var h=-1,g=e[c+=t];++h<f;){var y=l[h],m=y.iteratee,x=y.type,b=m(g);if(x==R)g=b;else if(!b){if(x==T)continue e;break e}}v[d++]=g}return v},pr.prototype.at=qa,pr.prototype.chain=function(){return Fa(this)},pr.prototype.commit=function(){return new gr(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===i&&(this.__values__=Fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},pr.prototype.plant=function(e){for(var t,n=this;n instanceof hr;){var r=da(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},pr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof yr){var t=e;return this.__actions__.length&&(t=new yr(this)),(t=t.reverse()).__actions__.push({func:Wa,args:[Pa],thisArg:i}),new gr(t,this.__chain__)}return this.thru(Pa)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return zo(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,Lt&&(pr.prototype[Lt]=function(){return this}),pr}();Et._=On,(o=function(){return On}.call(t,n,t,r))===i||(r.exports=o)}).call(this)}).call(this,n(4),n(8)(e))},function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);if(Array.isArray(e)||(t=e,e=[]),t=t||{},this.data=e||[],this.length=this.data.length,this.compare=t.compare||o,this.setNodeId=t.setNodeId||r,this.length>0)for(var i=this.length>>1;i>=0;i--)this._down(i);if(t.setNodeId)for(i=0;i<this.length;++i)this.setNodeId(this.data[i],i)}function r(){}function o(e,t){return e-t}e.exports=n,n.prototype={push:function(e){this.data.push(e),this.setNodeId(e,this.length),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},updateItem:function(e){this._down(e),this._up(e)},_up:function(e){for(var t=this.data,n=this.compare,r=this.setNodeId,o=t[e];e>0;){var i=e-1>>1,a=t[i];if(n(o,a)>=0)break;t[e]=a,r(a,e),e=i}t[e]=o,r(o,e)},_down:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,o=t[e],i=this.setNodeId;e<r;){var a=1+(e<<1),s=a+1,u=t[a];if(s<this.length&&n(t[s],u)<0&&(a=s,u=t[s]),n(u,o)>=0)break;t[e]=u,i(u,e),e=a}t[e]=o,i(o,e)}}},function(e,t){e.exports={l2:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},l1:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.abs(n)+Math.abs(r)}}},function(e,t){var n=[];"function"==typeof Object.freeze&&Object.freeze(n),e.exports={heuristic:function(){return 0},distance:function(){return 1},compareFScore:function(e,t){return e.fScore-t.fScore},NO_PATH:n,setHeapIndex:function(e,t){e.heapIndex=t},setH1:function(e,t){e.h1=t},setH2:function(e,t){e.h2=t},compareF1Score:function(e,t){return e.f1-t.f1},compareF2Score:function(e,t){return e.f2-t.f2}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(e){this.node=e,this.parent=null,this.closed=!1,this.open=0,this.distanceToSource=Number.POSITIVE_INFINITY,this.fScore=Number.POSITIVE_INFINITY,this.heapIndex=-1}e.exports=function(){var e=0,t=[];return{createNewState:function(r){var o=t[e];return o?(o.node=r,o.parent=null,o.closed=!1,o.open=0,o.distanceToSource=Number.POSITIVE_INFINITY,o.fScore=Number.POSITIVE_INFINITY,o.heapIndex=-1):(o=new n(r),t[e]=o),e++,o},reset:function(){e=0}}}},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(9),i=n(10),a=n(11);i.loadImageData("./images/map.png").then(i.generateGrid).then(function(e){var t=a.computeRooms(e),n=a.computeRoomGraph(t),s=i.invertGrid(e),u=a.computeRooms(s),c=o.Engine.create(),l=o.Render.create({element:document.body,engine:c}),f=u.map(function(e){return o.Bodies.rectangle(e.area.x+e.area.width/2,e.area.y+e.area.height/2,e.area.width,e.area.height,{isStatic:!0})}),d=e.length,p=e[0].length,v=[o.Bodies.rectangle(.05*-p,d/2,.1*p,1.2*d,{isStatic:!0}),o.Bodies.rectangle(p/2,.05*-d,1.2*p,.1*d,{isStatic:!0}),o.Bodies.rectangle(1.05*p,d/2,.1*p,1.2*d,{isStatic:!0}),o.Bodies.rectangle(p/2,1.05*d,1.2*p,.1*d,{isStatic:!0})],h=r.times(100).map(function(){var e=Math.round(Math.random()*p),t=Math.round(Math.random()*d);return o.Bodies.circle(e,t,6,{restitution:.9,slop:.5,friction:.1,frictionStatic:0,frictionAir:.12,density:.15})});o.World.add(c.world,f.concat(v).concat(h)),c.world.gravity.y=0;var g=o.Mouse.create(l.canvas),y=o.MouseConstraint.create(c,{mouse:g});o.World.add(c.world,y),o.Engine.run(c),o.Render.run(l);var m=h.map(function(){return 0}),x=h.map(function(e){var r=Math.round(Math.random()*p),o=Math.round(Math.random()*d);try{return a.findPath({x:e.position.x,y:e.position.y},{x:r,y:o},12,t,n)}catch(e){return[]}});setInterval(function(){h.map(function(e,t){if(m[t]<x[t].length){var n=o.Vector.sub(o.Vector.create(x[t][m[t]].x,x[t][m[t]].y),e.position);!function(e,t,n){var r=o.Vector.rotate({x:t,y:0},n);o.Body.applyForce(e,e.position,r)}(e,.02,o.Vector.angle(o.Vector.create(1,0),n)),o.Vector.magnitude(n)<6&&m[t]++}})},1e3/60)})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(t){var n;e.exports=function e(t,r,o){function i(s,u){if(!r[s]){if(!t[s]){var c="function"==typeof n&&n;if(!u&&c)return n(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n||e)},f,f.exports,e,t,r,o)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){var r={};t.exports=r;var o=e("../geometry/Vertices"),i=e("../geometry/Vector"),a=e("../core/Sleeping"),s=(e("../render/Render"),e("../core/Common")),u=e("../geometry/Bounds"),c=e("../geometry/Axes");!function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(t){var n={id:s.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},r=s.extend(n,t);return e(r,t),r},r.nextGroup=function(e){return e?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var e=function(e,t){t=t||{},r.set(e,{bounds:e.bounds||u.create(e.vertices),positionPrev:e.positionPrev||i.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),o.rotate(e.vertices,e.angle,e.position),c.rotate(e.axes,e.angle),u.update(e.bounds,e.vertices,e.velocity),r.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var n=e.isStatic?"#2e2b44":s.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);e.render.fillStyle=e.render.fillStyle||n,e.render.strokeStyle=e.render.strokeStyle||"#000",e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};r.set=function(e,t,n){var o;for(o in"string"==typeof t&&(o=t,(t={})[o]=n),t)if(n=t[o],t.hasOwnProperty(o))switch(o){case"isStatic":r.setStatic(e,n);break;case"isSleeping":a.set(e,n);break;case"mass":r.setMass(e,n);break;case"density":r.setDensity(e,n);break;case"inertia":r.setInertia(e,n);break;case"vertices":r.setVertices(e,n);break;case"position":r.setPosition(e,n);break;case"angle":r.setAngle(e,n);break;case"velocity":r.setVelocity(e,n);break;case"angularVelocity":r.setAngularVelocity(e,n);break;case"parts":r.setParts(e,n);break;default:e[o]=n}},r.setStatic=function(e,t){for(var n=0;n<e.parts.length;n++){var r=e.parts[n];r.isStatic=t,t?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,delete r._original)}},r.setMass=function(e,t){var n=e.inertia/(e.mass/6);e.inertia=n*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},r.setDensity=function(e,t){r.setMass(e,t*e.area),e.density=t},r.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},r.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=o.create(t,e),e.axes=c.fromVertices(e.vertices),e.area=o.area(e.vertices),r.setMass(e,e.density*e.area);var n=o.centre(e.vertices);o.translate(e.vertices,n,-1),r.setInertia(e,r._inertiaScale*o.inertia(e.vertices,e.mass)),o.translate(e.vertices,e.position),u.update(e.bounds,e.vertices,e.velocity)},r.setParts=function(e,t,n){var i;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,i=0;i<t.length;i++){var a=t[i];a!==e&&(a.parent=e,e.parts.push(a))}if(1!==e.parts.length){if(n=void 0===n||n){var s=[];for(i=0;i<t.length;i++)s=s.concat(t[i].vertices);o.clockwiseSort(s);var u=o.hull(s),c=o.centre(u);r.setVertices(e,u),o.translate(e.vertices,c)}var l=r._totalProperties(e);e.area=l.area,e.parent=e,e.position.x=l.centre.x,e.position.y=l.centre.y,e.positionPrev.x=l.centre.x,e.positionPrev.y=l.centre.y,r.setMass(e,l.mass),r.setInertia(e,l.inertia),r.setPosition(e,l.centre)}},r.setPosition=function(e,t){var n=i.sub(t,e.position);e.positionPrev.x+=n.x,e.positionPrev.y+=n.y;for(var r=0;r<e.parts.length;r++){var a=e.parts[r];a.position.x+=n.x,a.position.y+=n.y,o.translate(a.vertices,n),u.update(a.bounds,a.vertices,e.velocity)}},r.setAngle=function(e,t){var n=t-e.angle;e.anglePrev+=n;for(var r=0;r<e.parts.length;r++){var a=e.parts[r];a.angle+=n,o.rotate(a.vertices,n,e.position),c.rotate(a.axes,n),u.update(a.bounds,a.vertices,e.velocity),r>0&&i.rotateAbout(a.position,n,e.position,a.position)}},r.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=i.magnitude(e.velocity)},r.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},r.translate=function(e,t){r.setPosition(e,i.add(e.position,t))},r.rotate=function(e,t,n){if(n){var o=Math.cos(t),i=Math.sin(t),a=e.position.x-n.x,s=e.position.y-n.y;r.setPosition(e,{x:n.x+(a*o-s*i),y:n.y+(a*i+s*o)}),r.setAngle(e,e.angle+t)}else r.setAngle(e,e.angle+t)},r.scale=function(e,t,n,i){var a=0,s=0;i=i||e.position;for(var l=0;l<e.parts.length;l++){var f=e.parts[l];o.scale(f.vertices,t,n,i),f.axes=c.fromVertices(f.vertices),f.area=o.area(f.vertices),r.setMass(f,e.density*f.area),o.translate(f.vertices,{x:-f.position.x,y:-f.position.y}),r.setInertia(f,r._inertiaScale*o.inertia(f.vertices,f.mass)),o.translate(f.vertices,{x:f.position.x,y:f.position.y}),l>0&&(a+=f.area,s+=f.inertia),f.position.x=i.x+(f.position.x-i.x)*t,f.position.y=i.y+(f.position.y-i.y)*n,u.update(f.bounds,f.vertices,e.velocity)}e.parts.length>1&&(e.area=a,e.isStatic||(r.setMass(e,e.density*a),r.setInertia(e,s))),e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=null)},r.update=function(e,t,n,r){var a=Math.pow(t*n*e.timeScale,2),s=1-e.frictionAir*n*e.timeScale,l=e.position.x-e.positionPrev.x,f=e.position.y-e.positionPrev.y;e.velocity.x=l*s*r+e.force.x/e.mass*a,e.velocity.y=f*s*r+e.force.y/e.mass*a,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*s*r+e.torque/e.inertia*a,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=i.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var d=0;d<e.parts.length;d++){var p=e.parts[d];o.translate(p.vertices,e.velocity),d>0&&(p.position.x+=e.velocity.x,p.position.y+=e.velocity.y),0!==e.angularVelocity&&(o.rotate(p.vertices,e.angularVelocity,e.position),c.rotate(p.axes,e.angularVelocity),d>0&&i.rotateAbout(p.position,e.angularVelocity,e.position,p.position)),u.update(p.bounds,p.vertices,e.velocity)}},r.applyForce=function(e,t,n){e.force.x+=n.x,e.force.y+=n.y;var r={x:t.x-e.position.x,y:t.y-e.position.y};e.torque+=r.x*n.y-r.y*n.x},r._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===e.parts.length?0:1;n<e.parts.length;n++){var r=e.parts[n],o=r.mass!==1/0?r.mass:1;t.mass+=o,t.area+=r.area,t.inertia+=r.inertia,t.centre=i.add(t.centre,i.mult(r.position,o))}return t.centre=i.div(t.centre,t.mass),t}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(e,t,n){var r={};t.exports=r;var o=e("../core/Events"),i=e("../core/Common"),a=e("../geometry/Bounds"),s=e("./Body");r.create=function(e){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},r.setModified=function(e,t,n,o){if(e.isModified=t,n&&e.parent&&r.setModified(e.parent,t,n,o),o)for(var i=0;i<e.composites.length;i++){var a=e.composites[i];r.setModified(a,t,n,o)}},r.add=function(e,t){var n=[].concat(t);o.trigger(e,"beforeAdd",{object:t});for(var a=0;a<n.length;a++){var s=n[a];switch(s.type){case"body":if(s.parent!==s){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(e,s);break;case"constraint":r.addConstraint(e,s);break;case"composite":r.addComposite(e,s);break;case"mouseConstraint":r.addConstraint(e,s.constraint)}}return o.trigger(e,"afterAdd",{object:t}),e},r.remove=function(e,t,n){var i=[].concat(t);o.trigger(e,"beforeRemove",{object:t});for(var a=0;a<i.length;a++){var s=i[a];switch(s.type){case"body":r.removeBody(e,s,n);break;case"constraint":r.removeConstraint(e,s,n);break;case"composite":r.removeComposite(e,s,n);break;case"mouseConstraint":r.removeConstraint(e,s.constraint)}}return o.trigger(e,"afterRemove",{object:t}),e},r.addComposite=function(e,t){return e.composites.push(t),t.parent=e,r.setModified(e,!0,!0,!1),e},r.removeComposite=function(e,t,n){var o=i.indexOf(e.composites,t);if(-1!==o&&(r.removeCompositeAt(e,o),r.setModified(e,!0,!0,!1)),n)for(var a=0;a<e.composites.length;a++)r.removeComposite(e.composites[a],t,!0);return e},r.removeCompositeAt=function(e,t){return e.composites.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addBody=function(e,t){return e.bodies.push(t),r.setModified(e,!0,!0,!1),e},r.removeBody=function(e,t,n){var o=i.indexOf(e.bodies,t);if(-1!==o&&(r.removeBodyAt(e,o),r.setModified(e,!0,!0,!1)),n)for(var a=0;a<e.composites.length;a++)r.removeBody(e.composites[a],t,!0);return e},r.removeBodyAt=function(e,t){return e.bodies.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addConstraint=function(e,t){return e.constraints.push(t),r.setModified(e,!0,!0,!1),e},r.removeConstraint=function(e,t,n){var o=i.indexOf(e.constraints,t);if(-1!==o&&r.removeConstraintAt(e,o),n)for(var a=0;a<e.composites.length;a++)r.removeConstraint(e.composites[a],t,!0);return e},r.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),r.setModified(e,!0,!0,!1),e},r.clear=function(e,t,n){if(n)for(var o=0;o<e.composites.length;o++)r.clear(e.composites[o],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,r.setModified(e,!0,!0,!1),e},r.allBodies=function(e){for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++)t=t.concat(r.allBodies(e.composites[n]));return t},r.allConstraints=function(e){for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++)t=t.concat(r.allConstraints(e.composites[n]));return t},r.allComposites=function(e){for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++)t=t.concat(r.allComposites(e.composites[n]));return t},r.get=function(e,t,n){var o,i;switch(n){case"body":o=r.allBodies(e);break;case"constraint":o=r.allConstraints(e);break;case"composite":o=r.allComposites(e).concat(e)}return o?0===(i=o.filter(function(e){return e.id.toString()===t.toString()})).length?null:i[0]:null},r.move=function(e,t,n){return r.remove(e,t),r.add(n,t),e},r.rebase=function(e){for(var t=r.allBodies(e).concat(r.allConstraints(e)).concat(r.allComposites(e)),n=0;n<t.length;n++)t[n].id=i.nextId();return r.setModified(e,!0,!0,!1),e},r.translate=function(e,t,n){for(var o=n?r.allBodies(e):e.bodies,i=0;i<o.length;i++)s.translate(o[i],t);return r.setModified(e,!0,!0,!1),e},r.rotate=function(e,t,n,o){for(var i=Math.cos(t),a=Math.sin(t),u=o?r.allBodies(e):e.bodies,c=0;c<u.length;c++){var l=u[c],f=l.position.x-n.x,d=l.position.y-n.y;s.setPosition(l,{x:n.x+(f*i-d*a),y:n.y+(f*a+d*i)}),s.rotate(l,t)}return r.setModified(e,!0,!0,!1),e},r.scale=function(e,t,n,o,i){for(var a=i?r.allBodies(e):e.bodies,u=0;u<a.length;u++){var c=a[u],l=c.position.x-o.x,f=c.position.y-o.y;s.setPosition(c,{x:o.x+l*t,y:o.y+f*n}),s.scale(c,t,n)}return r.setModified(e,!0,!0,!1),e},r.bounds=function(e){for(var t=r.allBodies(e),n=[],o=0;o<t.length;o+=1){var i=t[o];n.push(i.bounds.min,i.bounds.max)}return a.create(n)}},{"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"./Body":1}],3:[function(e,t,n){var r={};t.exports=r;var o=e("./Composite"),i=(e("../constraint/Constraint"),e("../core/Common"));r.create=function(e){var t=o.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return i.extend(t,n,e)}},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(e,t,n){var r={};t.exports=r,r.create=function(e){return{id:r.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},r.id=function(e){return e.body.id+"_"+e.index}},{}],5:[function(e,t,n){var r={};t.exports=r;var o=e("./SAT"),i=e("./Pair"),a=e("../geometry/Bounds");r.collisions=function(e,t){for(var n=[],s=t.pairs.table,u=0;u<e.length;u++){var c=e[u][0],l=e[u][1];if((!c.isStatic&&!c.isSleeping||!l.isStatic&&!l.isSleeping)&&r.canCollide(c.collisionFilter,l.collisionFilter)&&a.overlaps(c.bounds,l.bounds))for(var f=c.parts.length>1?1:0;f<c.parts.length;f++)for(var d=c.parts[f],p=l.parts.length>1?1:0;p<l.parts.length;p++){var v=l.parts[p];if(d===c&&v===l||a.overlaps(d.bounds,v.bounds)){var h,g=i.id(d,v),y=s[g];h=y&&y.isActive?y.collision:null;var m=o.collides(d,v,h);m.collided&&n.push(m)}}}return n},r.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(e,t,n){var r={};t.exports=r;var o=e("./Pair"),i=e("./Detector"),a=e("../core/Common");r.create=function(e){var t={controller:r,detector:i.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(t,e)},r.update=function(e,t,n,o){var i,a,s,u,c,l=n.world,f=e.buckets,d=!1;for(i=0;i<t.length;i++){var p=t[i];if((!p.isSleeping||o)&&!(p.bounds.max.x<l.bounds.min.x||p.bounds.min.x>l.bounds.max.x||p.bounds.max.y<l.bounds.min.y||p.bounds.min.y>l.bounds.max.y)){var v=r._getRegion(e,p);if(!p.region||v.id!==p.region.id||o){p.region&&!o||(p.region=v);var h=r._regionUnion(v,p.region);for(a=h.startCol;a<=h.endCol;a++)for(s=h.startRow;s<=h.endRow;s++){c=r._getBucketId(a,s),u=f[c];var g=a>=v.startCol&&a<=v.endCol&&s>=v.startRow&&s<=v.endRow,y=a>=p.region.startCol&&a<=p.region.endCol&&s>=p.region.startRow&&s<=p.region.endRow;!g&&y&&y&&u&&r._bucketRemoveBody(e,u,p),(p.region===v||g&&!y||o)&&(u||(u=r._createBucket(f,c)),r._bucketAddBody(e,u,p))}p.region=v,d=!0}}}d&&(e.pairsList=r._createActivePairsList(e))},r.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},r._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),o=Math.max(e.endCol,t.endCol),i=Math.min(e.startRow,t.startRow),a=Math.max(e.endRow,t.endRow);return r._createRegion(n,o,i,a)},r._getRegion=function(e,t){var n=t.bounds,o=Math.floor(n.min.x/e.bucketWidth),i=Math.floor(n.max.x/e.bucketWidth),a=Math.floor(n.min.y/e.bucketHeight),s=Math.floor(n.max.y/e.bucketHeight);return r._createRegion(o,i,a,s)},r._createRegion=function(e,t,n,r){return{id:e+","+t+","+n+","+r,startCol:e,endCol:t,startRow:n,endRow:r}},r._getBucketId=function(e,t){return"C"+e+"R"+t},r._createBucket=function(e,t){var n=e[t]=[];return n},r._bucketAddBody=function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(!(n.id===i.id||n.isStatic&&i.isStatic)){var a=o.id(n,i),s=e.pairs[a];s?s[2]+=1:e.pairs[a]=[n,i,1]}}t.push(n)},r._bucketRemoveBody=function(e,t,n){t.splice(a.indexOf(t,n),1);for(var r=0;r<t.length;r++){var i=t[r],s=o.id(n,i),u=e.pairs[s];u&&(u[2]-=1)}},r._createActivePairsList=function(e){var t,n,r=[];t=a.keys(e.pairs);for(var o=0;o<t.length;o++)(n=e.pairs[t[o]])[2]>0?r.push(n):delete e.pairs[t[o]];return r}},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(e,t,n){var r={};t.exports=r;var o=e("./Contact");r.create=function(e,t){var n=e.bodyA,o=e.bodyB,i=e.parentA,a=e.parentB,s={id:r.id(n,o),bodyA:n,bodyB:o,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:n.isSensor||o.isSensor,timeCreated:t,timeUpdated:t,inverseMass:i.inverseMass+a.inverseMass,friction:Math.min(i.friction,a.friction),frictionStatic:Math.max(i.frictionStatic,a.frictionStatic),restitution:Math.max(i.restitution,a.restitution),slop:Math.max(i.slop,a.slop)};return r.update(s,e,t),s},r.update=function(e,t,n){var i=e.contacts,a=t.supports,s=e.activeContacts,u=t.parentA,c=t.parentB;if(e.collision=t,e.inverseMass=u.inverseMass+c.inverseMass,e.friction=Math.min(u.friction,c.friction),e.frictionStatic=Math.max(u.frictionStatic,c.frictionStatic),e.restitution=Math.max(u.restitution,c.restitution),e.slop=Math.max(u.slop,c.slop),s.length=0,t.collided){for(var l=0;l<a.length;l++){var f=a[l],d=o.id(f),p=i[d];p?s.push(p):s.push(i[d]=o.create(f))}e.separation=t.depth,r.setActive(e,!0,n)}else!0===e.isActive&&r.setActive(e,!1,n)},r.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.activeContacts.length=0)},r.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},{"./Contact":4}],8:[function(e,t,n){var r={};t.exports=r;var o=e("./Pair"),i=e("../core/Common");r._pairMaxIdleLife=1e3,r.create=function(e){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},r.update=function(e,t,n){var r,a,s,u,c=e.list,l=e.table,f=e.collisionStart,d=e.collisionEnd,p=e.collisionActive,v=[];for(f.length=0,d.length=0,p.length=0,u=0;u<t.length;u++)(r=t[u]).collided&&(a=o.id(r.bodyA,r.bodyB),v.push(a),(s=l[a])?(s.isActive?p.push(s):f.push(s),o.update(s,r,n)):(s=o.create(r,n),l[a]=s,f.push(s),c.push(s)));for(u=0;u<c.length;u++)(s=c[u]).isActive&&-1===i.indexOf(v,s.id)&&(o.setActive(s,!1,n),d.push(s))},r.removeOld=function(e,t){var n,o,i,a,s=e.list,u=e.table,c=[];for(a=0;a<s.length;a++)n=s[a],(o=n.collision).bodyA.isSleeping||o.bodyB.isSleeping?n.timeUpdated=t:t-n.timeUpdated>r._pairMaxIdleLife&&c.push(a);for(a=0;a<c.length;a++)i=c[a]-a,n=s[i],delete u[n.id],s.splice(i,1)},r.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},{"../core/Common":14,"./Pair":7}],9:[function(e,t,n){var r={};t.exports=r;var o=e("../geometry/Vector"),i=e("./SAT"),a=e("../geometry/Bounds"),s=e("../factory/Bodies"),u=e("../geometry/Vertices");r.collides=function(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r];if(a.overlaps(o.bounds,e.bounds))for(var s=1===o.parts.length?0:1;s<o.parts.length;s++){var u=o.parts[s];if(a.overlaps(u.bounds,e.bounds)){var c=i.collides(u,e);if(c.collided){n.push(c);break}}}}return n},r.ray=function(e,t,n,i){i=i||1e-100;for(var a=o.angle(t,n),u=o.magnitude(o.sub(t,n)),c=.5*(n.x+t.x),l=.5*(n.y+t.y),f=s.rectangle(c,l,u,i,{angle:a}),d=r.collides(f,e),p=0;p<d.length;p+=1){var v=d[p];v.body=v.bodyB=v.bodyA}return d},r.region=function(e,t,n){for(var r=[],o=0;o<e.length;o++){var i=e[o],s=a.overlaps(i.bounds,t);(s&&!n||!s&&n)&&r.push(i)}return r},r.point=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];if(a.contains(o.bounds,t))for(var i=1===o.parts.length?0:1;i<o.parts.length;i++){var s=o.parts[i];if(a.contains(s.bounds,t)&&u.contains(s.vertices,t)){n.push(o);break}}}return n}},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(e,t,n){var r={};t.exports=r;var o=e("../geometry/Vertices"),i=e("../geometry/Vector"),a=e("../core/Common"),s=e("../geometry/Bounds");r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(e){var t,n,r;for(t=0;t<e.length;t++)(n=e[t]).isActive&&(r=n.activeContacts.length,n.collision.parentA.totalContacts+=r,n.collision.parentB.totalContacts+=r)},r.solvePosition=function(e,t){var n,o,a,s,u,c,l,f,d,p=i._temp[0],v=i._temp[1],h=i._temp[2],g=i._temp[3];for(n=0;n<e.length;n++)(o=e[n]).isActive&&!o.isSensor&&(a=o.collision,s=a.parentA,u=a.parentB,c=a.normal,l=i.sub(i.add(u.positionImpulse,u.position,p),i.add(s.positionImpulse,i.sub(u.position,a.penetration,v),h),g),o.separation=i.dot(c,l));for(n=0;n<e.length;n++)(o=e[n]).isActive&&!o.isSensor&&(a=o.collision,s=a.parentA,u=a.parentB,c=a.normal,d=(o.separation-o.slop)*t,(s.isStatic||u.isStatic)&&(d*=2),s.isStatic||s.isSleeping||(f=r._positionDampen/s.totalContacts,s.positionImpulse.x+=c.x*d*f,s.positionImpulse.y+=c.y*d*f),u.isStatic||u.isSleeping||(f=r._positionDampen/u.totalContacts,u.positionImpulse.x-=c.x*d*f,u.positionImpulse.y-=c.y*d*f))},r.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var a=0;a<n.parts.length;a++){var u=n.parts[a];o.translate(u.vertices,n.positionImpulse),s.update(u.bounds,u.vertices,n.velocity),u.position.x+=n.positionImpulse.x,u.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,i.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=r._positionWarming,n.positionImpulse.y*=r._positionWarming)}}},r.preSolveVelocity=function(e){var t,n,r,o,a,s,u,c,l,f,d,p,v,h,g=i._temp[0],y=i._temp[1];for(t=0;t<e.length;t++)if((r=e[t]).isActive&&!r.isSensor)for(o=r.activeContacts,a=r.collision,s=a.parentA,u=a.parentB,c=a.normal,l=a.tangent,n=0;n<o.length;n++)f=o[n],d=f.vertex,p=f.normalImpulse,v=f.tangentImpulse,0===p&&0===v||(g.x=c.x*p+l.x*v,g.y=c.y*p+l.y*v,s.isStatic||s.isSleeping||(h=i.sub(d,s.position,y),s.positionPrev.x+=g.x*s.inverseMass,s.positionPrev.y+=g.y*s.inverseMass,s.anglePrev+=i.cross(h,g)*s.inverseInertia),u.isStatic||u.isSleeping||(h=i.sub(d,u.position,y),u.positionPrev.x-=g.x*u.inverseMass,u.positionPrev.y-=g.y*u.inverseMass,u.anglePrev-=i.cross(h,g)*u.inverseInertia))},r.solveVelocity=function(e,t){for(var n=t*t,o=i._temp[0],s=i._temp[1],u=i._temp[2],c=i._temp[3],l=i._temp[4],f=i._temp[5],d=0;d<e.length;d++){var p=e[d];if(p.isActive&&!p.isSensor){var v=p.collision,h=v.parentA,g=v.parentB,y=v.normal,m=v.tangent,x=p.activeContacts,b=1/x.length;h.velocity.x=h.position.x-h.positionPrev.x,h.velocity.y=h.position.y-h.positionPrev.y,g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,h.angularVelocity=h.angle-h.anglePrev,g.angularVelocity=g.angle-g.anglePrev;for(var _=0;_<x.length;_++){var w=x[_],S=w.vertex,I=i.sub(S,h.position,s),A=i.sub(S,g.position,u),C=i.add(h.velocity,i.mult(i.perp(I),h.angularVelocity),c),P=i.add(g.velocity,i.mult(i.perp(A),g.angularVelocity),l),k=i.sub(C,P,f),B=i.dot(y,k),M=i.dot(m,k),T=Math.abs(M),R=a.sign(M),E=(1+p.restitution)*B,O=a.clamp(p.separation+B,0,1)*r._frictionNormalMultiplier,N=M,j=1/0;T>p.friction*p.frictionStatic*O*n&&(j=T,N=a.clamp(p.friction*R*n,-j,j));var V=i.cross(I,y),L=i.cross(A,y),F=b/(h.inverseMass+g.inverseMass+h.inverseInertia*V*V+g.inverseInertia*L*L);if(E*=F,N*=F,B<0&&B*B>r._restingThresh*n)w.normalImpulse=0;else{var W=w.normalImpulse;w.normalImpulse=Math.min(w.normalImpulse+E,0),E=w.normalImpulse-W}if(M*M>r._restingThreshTangent*n)w.tangentImpulse=0;else{var q=w.tangentImpulse;w.tangentImpulse=a.clamp(w.tangentImpulse+N,-j,j),N=w.tangentImpulse-q}o.x=y.x*E+m.x*N,o.y=y.y*E+m.y*N,h.isStatic||h.isSleeping||(h.positionPrev.x+=o.x*h.inverseMass,h.positionPrev.y+=o.y*h.inverseMass,h.anglePrev+=i.cross(I,o)*h.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=o.x*g.inverseMass,g.positionPrev.y-=o.y*g.inverseMass,g.anglePrev-=i.cross(A,o)*g.inverseInertia)}}}}},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(e,t,n){var r={};t.exports=r;var o=e("../geometry/Vertices"),i=e("../geometry/Vector");r.collides=function(e,t,n){var a,s,u,c,l=!1;if(n){var f=e.parent,d=t.parent,p=f.speed*f.speed+f.angularSpeed*f.angularSpeed+d.speed*d.speed+d.angularSpeed*d.angularSpeed;l=n&&n.collided&&p<.2,c=n}else c={collided:!1,bodyA:e,bodyB:t};if(n&&l){var v=c.axisBody,h=v===e?t:e,g=[v.axes[n.axisNumber]];if(u=r._overlapAxes(v.vertices,h.vertices,g),c.reused=!0,u.overlap<=0)return c.collided=!1,c}else{if((a=r._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return c.collided=!1,c;if((s=r._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return c.collided=!1,c;a.overlap<s.overlap?(u=a,c.axisBody=e):(u=s,c.axisBody=t),c.axisNumber=u.axisNumber}c.bodyA=e.id<t.id?e:t,c.bodyB=e.id<t.id?t:e,c.collided=!0,c.depth=u.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,e=c.bodyA,t=c.bodyB,i.dot(u.axis,i.sub(t.position,e.position))<0?c.normal={x:u.axis.x,y:u.axis.y}:c.normal={x:-u.axis.x,y:-u.axis.y},c.tangent=i.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var y=r._findSupports(e,t,c.normal),m=[];if(o.contains(e.vertices,y[0])&&m.push(y[0]),o.contains(e.vertices,y[1])&&m.push(y[1]),m.length<2){var x=r._findSupports(t,e,i.neg(c.normal));o.contains(t.vertices,x[0])&&m.push(x[0]),m.length<2&&o.contains(t.vertices,x[1])&&m.push(x[1])}return m.length<1&&(m=[y[0]]),c.supports=m,c},r._overlapAxes=function(e,t,n){for(var o,a,s=i._temp[0],u=i._temp[1],c={overlap:Number.MAX_VALUE},l=0;l<n.length;l++){if(a=n[l],r._projectToAxis(s,e,a),r._projectToAxis(u,t,a),(o=Math.min(s.max-u.min,u.max-s.min))<=0)return c.overlap=o,c;o<c.overlap&&(c.overlap=o,c.axis=a,c.axisNumber=l)}return c},r._projectToAxis=function(e,t,n){for(var r=i.dot(t[0],n),o=r,a=1;a<t.length;a+=1){var s=i.dot(t[a],n);s>o?o=s:s<r&&(r=s)}e.min=r,e.max=o},r._findSupports=function(e,t,n){for(var r,o,a,s,u=Number.MAX_VALUE,c=i._temp[0],l=t.vertices,f=e.position,d=0;d<l.length;d++)o=l[d],c.x=o.x-f.x,c.y=o.y-f.y,(r=-i.dot(n,c))<u&&(u=r,a=o);var p=a.index-1>=0?a.index-1:l.length-1;o=l[p],c.x=o.x-f.x,c.y=o.y-f.y,u=-i.dot(n,c),s=o;var v=(a.index+1)%l.length;return o=l[v],c.x=o.x-f.x,c.y=o.y-f.y,(r=-i.dot(n,c))<u&&(s=o),[a,s]}},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(e,t,n){var r={};t.exports=r;var o=e("../geometry/Vertices"),i=e("../geometry/Vector"),a=e("../core/Sleeping"),s=e("../geometry/Bounds"),u=e("../geometry/Axes"),c=e("../core/Common");r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?i.add(t.bodyA.position,t.pointA):t.pointA,r=t.bodyB?i.add(t.bodyB.position,t.pointB):t.pointB,o=i.magnitude(i.sub(n,r));t.length=void 0!==t.length?t.length:o,t.id=t.id||c.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var a={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&t.stiffness>.1?(a.type="pin",a.anchors=!1):t.stiffness<.9&&(a.type="spring"),t.render=c.extend(a,t.render),t},r.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var n=e[t],r=n.constraintImpulse;n.isStatic||0===r.x&&0===r.y&&0===r.angle||(n.position.x+=r.x,n.position.y+=r.y,n.angle+=r.angle)}},r.solveAll=function(e,t){for(var n=0;n<e.length;n+=1){var o=e[n],i=!o.bodyA||o.bodyA&&o.bodyA.isStatic,a=!o.bodyB||o.bodyB&&o.bodyB.isStatic;(i||a)&&r.solve(e[n],t)}for(n=0;n<e.length;n+=1)o=e[n],i=!o.bodyA||o.bodyA&&o.bodyA.isStatic,a=!o.bodyB||o.bodyB&&o.bodyB.isStatic,i||a||r.solve(e[n],t)},r.solve=function(e,t){var n=e.bodyA,o=e.bodyB,a=e.pointA,s=e.pointB;if(n||o){n&&!n.isStatic&&(i.rotate(a,n.angle-e.angleA,a),e.angleA=n.angle),o&&!o.isStatic&&(i.rotate(s,o.angle-e.angleB,s),e.angleB=o.angle);var u=a,c=s;if(n&&(u=i.add(n.position,a)),o&&(c=i.add(o.position,s)),u&&c){var l=i.sub(u,c),f=i.magnitude(l);f<r._minLength&&(f=r._minLength);var d,p,v,h,g,y=(f-e.length)/f,m=e.stiffness<1?e.stiffness*t:e.stiffness,x=i.mult(l,y*m),b=(n?n.inverseMass:0)+(o?o.inverseMass:0),_=(n?n.inverseInertia:0)+(o?o.inverseInertia:0),w=b+_;if(e.damping){var S=i.create();v=i.div(l,f),g=i.sub(o&&i.sub(o.position,o.positionPrev)||S,n&&i.sub(n.position,n.positionPrev)||S),h=i.dot(v,g)}n&&!n.isStatic&&(p=n.inverseMass/b,n.constraintImpulse.x-=x.x*p,n.constraintImpulse.y-=x.y*p,n.position.x-=x.x*p,n.position.y-=x.y*p,e.damping&&(n.positionPrev.x-=e.damping*v.x*h*p,n.positionPrev.y-=e.damping*v.y*h*p),d=i.cross(a,x)/w*r._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle-=d,n.angle-=d),o&&!o.isStatic&&(p=o.inverseMass/b,o.constraintImpulse.x+=x.x*p,o.constraintImpulse.y+=x.y*p,o.position.x+=x.x*p,o.position.y+=x.y*p,e.damping&&(o.positionPrev.x+=e.damping*v.x*h*p,o.positionPrev.y+=e.damping*v.y*h*p),d=i.cross(s,x)/w*r._torqueDampen*o.inverseInertia*(1-e.angularStiffness),o.constraintImpulse.angle+=d,o.angle+=d)}}},r.postSolveAll=function(e){for(var t=0;t<e.length;t++){var n=e[t],c=n.constraintImpulse;if(!(n.isStatic||0===c.x&&0===c.y&&0===c.angle)){a.set(n,!1);for(var l=0;l<n.parts.length;l++){var f=n.parts[l];o.translate(f.vertices,c),l>0&&(f.position.x+=c.x,f.position.y+=c.y),0!==c.angle&&(o.rotate(f.vertices,c.angle,n.position),u.rotate(f.axes,c.angle),l>0&&i.rotateAbout(f.position,c.angle,n.position,f.position)),s.update(f.bounds,f.vertices,n.velocity)}c.angle*=r._warming,c.x*=r._warming,c.y*=r._warming}}}},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(e,t,n){var r={};t.exports=r;var o=e("../geometry/Vertices"),i=e("../core/Sleeping"),a=e("../core/Mouse"),s=e("../core/Events"),u=e("../collision/Detector"),c=e("./Constraint"),l=e("../body/Composite"),f=e("../core/Common"),d=e("../geometry/Bounds");r.create=function(e,t){var n=(e?e.mouse:null)||(t?t.mouse:null);n||(e&&e.render&&e.render.canvas?n=a.create(e.render.canvas):t&&t.element?n=a.create(t.element):(n=a.create(),f.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var o=c.create({label:"Mouse Constraint",pointA:n.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),i={type:"mouseConstraint",mouse:n,element:null,body:null,constraint:o,collisionFilter:{category:1,mask:4294967295,group:0}},u=f.extend(i,t);return s.on(e,"beforeUpdate",function(){var t=l.allBodies(e.world);r.update(u,t),r._triggerEvents(u)}),u},r.update=function(e,t){var n=e.mouse,r=e.constraint,a=e.body;if(0===n.button){if(r.bodyB)i.set(r.bodyB,!1),r.pointA=n.position;else for(var c=0;c<t.length;c++)if(a=t[c],d.contains(a.bounds,n.position)&&u.canCollide(a.collisionFilter,e.collisionFilter))for(var l=a.parts.length>1?1:0;l<a.parts.length;l++){var f=a.parts[l];if(o.contains(f.vertices,n.position)){r.pointA=n.position,r.bodyB=e.body=a,r.pointB={x:n.position.x-a.position.x,y:n.position.y-a.position.y},r.angleB=a.angle,i.set(a,!1),s.trigger(e,"startdrag",{mouse:n,body:a});break}}}else r.bodyB=e.body=null,r.pointB=null,a&&s.trigger(e,"enddrag",{mouse:n,body:a})},r._triggerEvents=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&s.trigger(e,"mousemove",{mouse:t}),n.mousedown&&s.trigger(e,"mousedown",{mouse:t}),n.mouseup&&s.trigger(e,"mouseup",{mouse:t}),a.clearSourceEvents(t)}},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(e,n,r){(function(t){var r={};n.exports=r,function(){r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r.extend=function(e,t){var n,o;"boolean"==typeof t?(n=2,o=t):(n=1,o=!0);for(var i=n;i<arguments.length;i++){var a=arguments[i];if(a)for(var s in a)o&&a[s]&&a[s].constructor===Object?e[s]&&e[s].constructor!==Object?e[s]=a[s]:(e[s]=e[s]||{},r.extend(e[s],o,a[s])):e[s]=a[s]}return e},r.clone=function(e,t){return r.extend({},t,e)},r.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},r.values=function(e){var t=[];if(Object.keys){for(var n=Object.keys(e),r=0;r<n.length;r++)t.push(e[n[r]]);return t}for(var o in e)t.push(e[o]);return t},r.get=function(e,t,n,r){t=t.split(".").slice(n,r);for(var o=0;o<t.length;o+=1)e=e[t[o]];return e},r.set=function(e,t,n,o,i){var a=t.split(".").slice(o,i);return r.get(e,t,0,-1)[a[a.length-1]]=n,n},r.shuffle=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(r.random()*(t+1)),o=e[t];e[t]=e[n],e[n]=o}return e},r.choose=function(e){return e[Math.floor(r.random()*e.length)]},r.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},r.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.isFunction=function(e){return"function"==typeof e},r.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},r.isString=function(e){return"[object String]"===toString.call(e)},r.clamp=function(e,t,n){return e<t?t:e>n?n:e},r.sign=function(e){return e<0?-1:1},r.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-r._nowStartTime},r.random=function(e,t){return t=void 0!==t?t:1,(e=void 0!==e?e:0)+n()*(t-e)};var n=function(){return r._seed=(9301*r._seed+49297)%233280,r._seed/233280};r.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.nextId=function(){return r._nextId++},r.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},r.map=function(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n},r.topologicalSort=function(e){var t=[],n=[],o=[];for(var i in e)n[i]||o[i]||r._topologicalSort(i,n,o,e,t);return t},r._topologicalSort=function(e,t,n,o,i){var a=o[e]||[];n[e]=!0;for(var s=0;s<a.length;s+=1){var u=a[s];n[u]||t[u]||r._topologicalSort(u,t,n,o,i)}n[e]=!1,t[e]=!0,i.push(e)},r.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var n=arguments[t];n._chained?e.push.apply(e,n._chained):e.push(n)}var r=function(){for(var t,n=new Array(arguments.length),r=0,o=arguments.length;r<o;r++)n[r]=arguments[r];for(r=0;r<e.length;r+=1){var i=e[r].apply(t,n);void 0!==i&&(t=i)}return t};return r._chained=e,r},r.chainPathBefore=function(e,t,n){return r.set(e,t,r.chain(n,r.get(e,t)))},r.chainPathAfter=function(e,t,n){return r.set(e,t,r.chain(r.get(e,t),n))},r._requireGlobal=function(n,r){var o="undefined"!=typeof window?window[n]:void 0!==t?t[n]:null;return o||e(r)}}()}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){var r={};t.exports=r;var o=e("../body/World"),i=e("./Sleeping"),a=e("../collision/Resolver"),s=e("../render/Render"),u=e("../collision/Pairs"),c=(e("./Metrics"),e("../collision/Grid")),l=e("./Events"),f=e("../body/Composite"),d=e("../constraint/Constraint"),p=e("./Common"),v=e("../body/Body");r.create=function(e,t){t=p.isElement(e)?t:e,e=p.isElement(e)?e:null,t=t||{},(e||t.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:c}},r=p.extend(n,t);if(e||r.render){var i={element:e,controller:s};r.render=p.extend(i,r.render)}return r.render&&r.render.controller&&(r.render=r.render.controller.create(r.render)),r.render&&(r.render.engine=r),r.world=t.world||o.create(r.world),r.pairs=u.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r},r.update=function(e,t,n){t=t||1e3/60,n=n||1;var o,s=e.world,c=e.timing,p=e.broadphase,v=[];c.timestamp+=t*c.timeScale;var h={timestamp:c.timestamp};l.trigger(e,"beforeUpdate",h);var g=f.allBodies(s),y=f.allConstraints(s);for(e.enableSleeping&&i.update(g,c.timeScale),r._bodiesApplyGravity(g,s.gravity),r._bodiesUpdate(g,t,c.timeScale,n,s.bounds),d.preSolveAll(g),o=0;o<e.constraintIterations;o++)d.solveAll(y,c.timeScale);d.postSolveAll(g),p.controller?(s.isModified&&p.controller.clear(p),p.controller.update(p,g,e,s.isModified),v=p.pairsList):v=g,s.isModified&&f.setModified(s,!1,!1,!0);var m=p.detector(v,e),x=e.pairs,b=c.timestamp;for(u.update(x,m,b),u.removeOld(x,b),e.enableSleeping&&i.afterCollisions(x.list,c.timeScale),x.collisionStart.length>0&&l.trigger(e,"collisionStart",{pairs:x.collisionStart}),a.preSolvePosition(x.list),o=0;o<e.positionIterations;o++)a.solvePosition(x.list,c.timeScale);for(a.postSolvePosition(g),d.preSolveAll(g),o=0;o<e.constraintIterations;o++)d.solveAll(y,c.timeScale);for(d.postSolveAll(g),a.preSolveVelocity(x.list),o=0;o<e.velocityIterations;o++)a.solveVelocity(x.list,c.timeScale);return x.collisionActive.length>0&&l.trigger(e,"collisionActive",{pairs:x.collisionActive}),x.collisionEnd.length>0&&l.trigger(e,"collisionEnd",{pairs:x.collisionEnd}),r._bodiesClearForces(g),l.trigger(e,"afterUpdate",h),e},r.merge=function(e,t){if(p.extend(e,t),t.world){e.world=t.world,r.clear(e);for(var n=f.allBodies(e.world),o=0;o<n.length;o++){var a=n[o];i.set(a,!1),a.id=p.nextId()}}},r.clear=function(e){var t=e.world;u.clear(e.pairs);var n=e.broadphase;if(n.controller){var r=f.allBodies(t);n.controller.clear(n),n.controller.update(n,r,e,!0)}},r._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.force.x=0,n.force.y=0,n.torque=0}},r._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==n)for(var r=0;r<e.length;r++){var o=e[r];o.isStatic||o.isSleeping||(o.force.y+=o.mass*t.y*n,o.force.x+=o.mass*t.x*n)}},r._bodiesUpdate=function(e,t,n,r,o){for(var i=0;i<e.length;i++){var a=e[i];a.isStatic||a.isSleeping||v.update(a,t,n,r)}}},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(e,t,n){var r={};t.exports=r;var o=e("./Common");r.on=function(e,t,n){for(var r,o=t.split(" "),i=0;i<o.length;i++)r=o[i],e.events=e.events||{},e.events[r]=e.events[r]||[],e.events[r].push(n);return n},r.off=function(e,t,n){if(t){"function"==typeof t&&(n=t,t=o.keys(e.events).join(" "));for(var r=t.split(" "),i=0;i<r.length;i++){var a=e.events[r[i]],s=[];if(n&&a)for(var u=0;u<a.length;u++)a[u]!==n&&s.push(a[u]);e.events[r[i]]=s}}else e.events={}},r.trigger=function(e,t,n){var r,i,a,s;if(e.events){n||(n={}),r=t.split(" ");for(var u=0;u<r.length;u++)if(i=r[u],a=e.events[i]){(s=o.clone(n,!1)).name=i,s.source=e;for(var c=0;c<a.length;c++)a[c].apply(e,[s])}}}},{"./Common":14}],17:[function(e,t,n){var r={};t.exports=r;var o=e("./Plugin"),i=e("./Common");r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){o.use(r,Array.prototype.slice.call(arguments))},r.before=function(e,t){return e=e.replace(/^Matter./,""),i.chainPathBefore(r,e,t)},r.after=function(e,t){return e=e.replace(/^Matter./,""),i.chainPathAfter(r,e,t)}},{"./Common":14,"./Plugin":20}],18:[function(e,t,n){},{"../body/Composite":2,"./Common":14}],19:[function(e,t,n){var r={};t.exports=r;var o=e("../core/Common");r.create=function(e){var t={};return e||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.body,t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=t.element.getAttribute("data-pixel-ratio")||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var n=r._getRelativeMousePosition(e,t.element,t.pixelRatio),o=e.changedTouches;o&&(t.button=0,e.preventDefault()),t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var n=r._getRelativeMousePosition(e,t.element,t.pixelRatio),o=e.changedTouches;o?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var n=r._getRelativeMousePosition(e,t.element,t.pixelRatio),o=e.changedTouches;o&&e.preventDefault(),t.button=-1,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},r.setElement(t,t.element),t},r.setElement=function(e,t){e.element=t,t.addEventListener("mousemove",e.mousemove),t.addEventListener("mousedown",e.mousedown),t.addEventListener("mouseup",e.mouseup),t.addEventListener("mousewheel",e.mousewheel),t.addEventListener("DOMMouseScroll",e.mousewheel),t.addEventListener("touchmove",e.mousemove),t.addEventListener("touchstart",e.mousedown),t.addEventListener("touchend",e.mouseup)},r.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},r.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r._getRelativeMousePosition=function(e,t,n){var r,o,i=t.getBoundingClientRect(),a=document.documentElement||document.body.parentNode||document.body,s=void 0!==window.pageXOffset?window.pageXOffset:a.scrollLeft,u=void 0!==window.pageYOffset?window.pageYOffset:a.scrollTop,c=e.changedTouches;return c?(r=c[0].pageX-i.left-s,o=c[0].pageY-i.top-u):(r=e.pageX-i.left-s,o=e.pageY-i.top-u),{x:r/(t.clientWidth/(t.width||t.clientWidth)*n),y:o/(t.clientHeight/(t.height||t.clientHeight)*n)}}},{"../core/Common":14}],20:[function(e,t,n){var r={};t.exports=r;var o=e("./Common");r._registry={},r.register=function(e){if(r.isPlugin(e)||o.warn("Plugin.register:",r.toString(e),"does not implement all required fields."),e.name in r._registry){var t=r._registry[e.name],n=r.versionParse(e.version).number,i=r.versionParse(t.version).number;n>i?(o.warn("Plugin.register:",r.toString(t),"was upgraded to",r.toString(e)),r._registry[e.name]=e):n<i?o.warn("Plugin.register:",r.toString(t),"can not be downgraded to",r.toString(e)):e!==t&&o.warn("Plugin.register:",r.toString(e),"is already registered to different plugin object")}else r._registry[e.name]=e;return e},r.resolve=function(e){return r._registry[r.dependencyParse(e).name]},r.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},r.isPlugin=function(e){return e&&e.name&&e.version&&e.install},r.isUsed=function(e,t){return e.used.indexOf(t)>-1},r.isFor=function(e,t){var n=e.for&&r.dependencyParse(e.for);return!e.for||t.name===n.name&&r.versionSatisfies(t.version,n.range)},r.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var n=r.dependencies(e),i=o.topologicalSort(n),a=[],s=0;s<i.length;s+=1)if(i[s]!==e.name){var u=r.resolve(i[s]);u?r.isUsed(e,u.name)||(r.isFor(u,e)||(o.warn("Plugin.use:",r.toString(u),"is for",u.for,"but installed on",r.toString(e)+"."),u._warned=!0),u.install?u.install(e):(o.warn("Plugin.use:",r.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(a.push("🔶 "+r.toString(u)),delete u._warned):a.push("✅ "+r.toString(u)),e.used.push(u.name)):a.push("❌ "+i[s])}a.length>0&&o.info(a.join("  "))}else o.warn("Plugin.use:",r.toString(e),"does not specify any dependencies to install.")},r.dependencies=function(e,t){var n=r.dependencyParse(e),i=n.name;if(!(i in(t=t||{}))){e=r.resolve(e)||e,t[i]=o.map(e.uses||[],function(t){r.isPlugin(t)&&r.register(t);var i=r.dependencyParse(t),a=r.resolve(t);return a&&!r.versionSatisfies(a.version,i.range)?(o.warn("Plugin.dependencies:",r.toString(a),"does not satisfy",r.toString(i),"used by",r.toString(n)+"."),a._warned=!0,e._warned=!0):a||(o.warn("Plugin.dependencies:",r.toString(t),"used by",r.toString(n),"could not be resolved."),e._warned=!0),i.name});for(var a=0;a<t[i].length;a+=1)r.dependencies(t[i][a],t);return t}},r.dependencyParse=function(e){return o.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||o.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},r.versionParse=function(e){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(e)||o.warn("Plugin.versionParse:",e,"is not a valid version or range.");var t=e.split("-");e=t[0];var n=isNaN(Number(e[0])),r=n?e.substr(1):e,i=o.map(r.split("."),function(e){return Number(e)});return{isRange:n,version:r,range:e,operator:n?e[0]:"",parts:i,prerelease:t[1],number:1e8*i[0]+1e4*i[1]+i[2]}},r.versionSatisfies=function(e,t){t=t||"*";var n=r.versionParse(t),o=n.parts,i=r.versionParse(e),a=i.parts;if(n.isRange){if("*"===n.operator||"*"===e)return!0;if("~"===n.operator)return a[0]===o[0]&&a[1]===o[1]&&a[2]>=o[2];if("^"===n.operator)return o[0]>0?a[0]===o[0]&&i.number>=n.number:o[1]>0?a[1]===o[1]&&a[2]>=o[2]:a[2]===o[2]}return e===t||"*"===e}},{"./Common":14}],21:[function(e,t,n){var r={};t.exports=r;var o,i,a,s=e("./Events"),u=e("./Engine"),c=e("./Common");"undefined"!=typeof window&&(o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o||(o=function(e){a=setTimeout(function(){e(c.now())},1e3/60)},i=function(){clearTimeout(a)}),r.create=function(e){var t=c.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(.5*t.fps),t.fps=1e3/t.delta,t},r.run=function(e,t){return void 0!==e.positionIterations&&(t=e,e=r.create()),function n(i){e.frameRequestId=o(n),i&&e.enabled&&r.tick(e,t,i)}(),e},r.tick=function(e,t,n){var r,o=t.timing,i=1,a={timestamp:o.timestamp};s.trigger(e,"beforeTick",a),s.trigger(t,"beforeTick",a),e.isFixed?r=e.delta:(r=n-e.timePrev||e.delta,e.timePrev=n,e.deltaHistory.push(r),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),r=(r=(r=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:r)>e.deltaMax?e.deltaMax:r,i=r/e.delta,e.delta=r),0!==e.timeScalePrev&&(i*=o.timeScale/e.timeScalePrev),0===o.timeScale&&(i=0),e.timeScalePrev=o.timeScale,e.correction=i,e.frameCounter+=1,n-e.counterTimestamp>=1e3&&(e.fps=e.frameCounter*((n-e.counterTimestamp)/1e3),e.counterTimestamp=n,e.frameCounter=0),s.trigger(e,"tick",a),s.trigger(t,"tick",a),t.world.isModified&&t.render&&t.render.controller&&t.render.controller.clear&&t.render.controller.clear(t.render),s.trigger(e,"beforeUpdate",a),u.update(t,r,i),s.trigger(e,"afterUpdate",a),t.render&&t.render.controller&&(s.trigger(e,"beforeRender",a),s.trigger(t,"beforeRender",a),t.render.controller.world(t.render),s.trigger(e,"afterRender",a),s.trigger(t,"afterRender",a)),s.trigger(e,"afterTick",a),s.trigger(t,"afterTick",a)},r.stop=function(e){i(e.frameRequestId)},r.start=function(e,t){r.run(e,t)}},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(e,t,n){var r={};t.exports=r;var o=e("./Events");r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(e,t){for(var n=t*t*t,o=0;o<e.length;o++){var i=e[o],a=i.speed*i.speed+i.angularSpeed*i.angularSpeed;if(0===i.force.x&&0===i.force.y){var s=Math.min(i.motion,a),u=Math.max(i.motion,a);i.motion=r._minBias*s+(1-r._minBias)*u,i.sleepThreshold>0&&i.motion<r._motionSleepThreshold*n?(i.sleepCounter+=1,i.sleepCounter>=i.sleepThreshold&&r.set(i,!0)):i.sleepCounter>0&&(i.sleepCounter-=1)}else r.set(i,!1)}},r.afterCollisions=function(e,t){for(var n=t*t*t,o=0;o<e.length;o++){var i=e[o];if(i.isActive){var a=i.collision,s=a.bodyA.parent,u=a.bodyB.parent;if(!(s.isSleeping&&u.isSleeping||s.isStatic||u.isStatic)&&(s.isSleeping||u.isSleeping)){var c=s.isSleeping&&!s.isStatic?s:u,l=c===s?u:s;!c.isStatic&&l.motion>r._motionWakeThreshold*n&&r.set(c,!1)}}}},r.set=function(e,t){var n=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,n||o.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,n&&o.trigger(e,"sleepEnd"))}},{"./Events":16}],23:[function(e,t,n){var r={};t.exports=r;var o,i=e("../geometry/Vertices"),a=e("../core/Common"),s=e("../body/Body"),u=e("../geometry/Bounds"),c=e("../geometry/Vector");r.rectangle=function(e,t,n,r,o){o=o||{};var u={label:"Rectangle Body",position:{x:e,y:t},vertices:i.fromPath("L 0 0 L "+n+" 0 L "+n+" "+r+" L 0 "+r)};if(o.chamfer){var c=o.chamfer;u.vertices=i.chamfer(u.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete o.chamfer}return s.create(a.extend({},u,o))},r.trapezoid=function(e,t,n,r,o,u){u=u||{};var c,l=(1-2*(o*=.5))*n,f=n*o,d=f+l,p=d+f;c=o<.5?"L 0 0 L "+f+" "+-r+" L "+d+" "+-r+" L "+p+" 0":"L 0 0 L "+d+" "+-r+" L "+p+" 0";var v={label:"Trapezoid Body",position:{x:e,y:t},vertices:i.fromPath(c)};if(u.chamfer){var h=u.chamfer;v.vertices=i.chamfer(v.vertices,h.radius,h.quality,h.qualityMin,h.qualityMax),delete u.chamfer}return s.create(a.extend({},v,u))},r.circle=function(e,t,n,o,i){o=o||{};var s={label:"Circle Body",circleRadius:n};i=i||25;var u=Math.ceil(Math.max(10,Math.min(i,n)));return u%2==1&&(u+=1),r.polygon(e,t,u,n,a.extend({},s,o))},r.polygon=function(e,t,n,o,u){if(u=u||{},n<3)return r.circle(e,t,o,u);for(var c=2*Math.PI/n,l="",f=.5*c,d=0;d<n;d+=1){var p=f+d*c,v=Math.cos(p)*o,h=Math.sin(p)*o;l+="L "+v.toFixed(3)+" "+h.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:e,y:t},vertices:i.fromPath(l)};if(u.chamfer){var y=u.chamfer;g.vertices=i.chamfer(g.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete u.chamfer}return s.create(a.extend({},g,u))},r.fromVertices=function(e,t,n,r,l,f,d){var p,v,h,g,y,m,x,b,_;for(o||(o=a._requireGlobal("decomp","poly-decomp")),r=r||{},v=[],l=void 0!==l&&l,f=void 0!==f?f:.01,d=void 0!==d?d:10,o||a.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),a.isArray(n[0])||(n=[n]),b=0;b<n.length;b+=1)if(g=n[b],(h=i.isConvex(g))||!o)g=h?i.clockwiseSort(g):i.hull(g),v.push({position:{x:e,y:t},vertices:g});else{var w=g.map(function(e){return[e.x,e.y]});o.makeCCW(w),!1!==f&&o.removeCollinearPoints(w,f);var S=o.quickDecomp(w);for(y=0;y<S.length;y++){var I=S[y],A=I.map(function(e){return{x:e[0],y:e[1]}});d>0&&i.area(A)<d||v.push({position:i.centre(A),vertices:A})}}for(y=0;y<v.length;y++)v[y]=s.create(a.extend(v[y],r));if(l)for(y=0;y<v.length;y++){var C=v[y];for(m=y+1;m<v.length;m++){var P=v[m];if(u.overlaps(C.bounds,P.bounds)){var k=C.vertices,B=P.vertices;for(x=0;x<C.vertices.length;x++)for(_=0;_<P.vertices.length;_++){var M=c.magnitudeSquared(c.sub(k[(x+1)%k.length],B[_])),T=c.magnitudeSquared(c.sub(k[x],B[(_+1)%B.length]));M<5&&T<5&&(k[x].isInternal=!0,B[_].isInternal=!0)}}}}return v.length>1?(p=s.create(a.extend({parts:v.slice(0)},r)),s.setPosition(p,{x:e,y:t}),p):v[0]}},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(e,t,n){var r={};t.exports=r;var o=e("../body/Composite"),i=e("../constraint/Constraint"),a=e("../core/Common"),s=e("../body/Body"),u=e("./Bodies");r.stack=function(e,t,n,r,i,a,u){for(var c,l=o.create({label:"Stack"}),f=e,d=t,p=0,v=0;v<r;v++){for(var h=0,g=0;g<n;g++){var y=u(f,d,g,v,c,p);if(y){var m=y.bounds.max.y-y.bounds.min.y,x=y.bounds.max.x-y.bounds.min.x;m>h&&(h=m),s.translate(y,{x:.5*x,y:.5*m}),f=y.bounds.max.x+i,o.addBody(l,y),c=y,p+=1}else f+=i}d+=h+a,f=e}return l},r.chain=function(e,t,n,r,s,u){for(var c=e.bodies,l=1;l<c.length;l++){var f=c[l-1],d=c[l],p=f.bounds.max.y-f.bounds.min.y,v=f.bounds.max.x-f.bounds.min.x,h=d.bounds.max.y-d.bounds.min.y,g=d.bounds.max.x-d.bounds.min.x,y={bodyA:f,pointA:{x:v*t,y:p*n},bodyB:d,pointB:{x:g*r,y:h*s}},m=a.extend(y,u);o.addConstraint(e,i.create(m))}return e.label+=" Chain",e},r.mesh=function(e,t,n,r,s){var u,c,l,f,d,p=e.bodies;for(u=0;u<n;u++){for(c=1;c<t;c++)l=p[c-1+u*t],f=p[c+u*t],o.addConstraint(e,i.create(a.extend({bodyA:l,bodyB:f},s)));if(u>0)for(c=0;c<t;c++)l=p[c+(u-1)*t],f=p[c+u*t],o.addConstraint(e,i.create(a.extend({bodyA:l,bodyB:f},s))),r&&c>0&&(d=p[c-1+(u-1)*t],o.addConstraint(e,i.create(a.extend({bodyA:d,bodyB:f},s)))),r&&c<t-1&&(d=p[c+1+(u-1)*t],o.addConstraint(e,i.create(a.extend({bodyA:d,bodyB:f},s))))}return e.label+=" Mesh",e},r.pyramid=function(e,t,n,o,i,a,u){return r.stack(e,t,n,o,i,a,function(t,r,a,c,l,f){var d=Math.min(o,Math.ceil(n/2)),p=l?l.bounds.max.x-l.bounds.min.x:0;if(!(c>d)){var v=c=d-c,h=n-1-c;if(!(a<v||a>h)){1===f&&s.translate(l,{x:(a+(n%2==1?1:-1))*p,y:0});var g=l?a*p:0;return u(e+g+a*i,r,a,c,l,f)}}})},r.newtonsCradle=function(e,t,n,r,a){for(var s=o.create({label:"Newtons Cradle"}),c=0;c<n;c++){var l=u.circle(e+c*(1.9*r),t+a,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),f=i.create({pointA:{x:e+c*(1.9*r),y:t},bodyB:l});o.addBody(s,l),o.addConstraint(s,f)}return s},r.car=function(e,t,n,r,a){var c=s.nextGroup(!0),l=.5*-n+20,f=.5*n-20,d=o.create({label:"Car"}),p=u.rectangle(e,t,n,r,{collisionFilter:{group:c},chamfer:{radius:.5*r},density:2e-4}),v=u.circle(e+l,t+0,a,{collisionFilter:{group:c},friction:.8}),h=u.circle(e+f,t+0,a,{collisionFilter:{group:c},friction:.8}),g=i.create({bodyB:p,pointB:{x:l,y:0},bodyA:v,stiffness:1,length:0}),y=i.create({bodyB:p,pointB:{x:f,y:0},bodyA:h,stiffness:1,length:0});return o.addBody(d,p),o.addBody(d,v),o.addBody(d,h),o.addConstraint(d,g),o.addConstraint(d,y),d},r.softBody=function(e,t,n,o,i,s,c,l,f,d){f=a.extend({inertia:1/0},f),d=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},d);var p=r.stack(e,t,n,o,i,s,function(e,t){return u.circle(e,t,l,f)});return r.mesh(p,n,o,c,d),p.label="Soft Body",p}},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(e,t,n){var r={};t.exports=r;var o=e("../geometry/Vector"),i=e("../core/Common");r.fromVertices=function(e){for(var t={},n=0;n<e.length;n++){var r=(n+1)%e.length,a=o.normalise({x:e[r].y-e[n].y,y:e[n].x-e[r].x}),s=0===a.y?1/0:a.x/a.y;s=s.toFixed(3).toString(),t[s]=a}return i.values(t)},r.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),r=Math.sin(t),o=0;o<e.length;o++){var i,a=e[o];i=a.x*n-a.y*r,a.y=a.x*r+a.y*n,a.x=i}}},{"../core/Common":14,"../geometry/Vector":28}],26:[function(e,t,n){var r={};t.exports=r,r.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&r.update(t,e),t},r.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<t.length;r++){var o=t[r];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},r.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},r.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},r.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},r.shift=function(e,t){var n=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+r}},{}],27:[function(e,t,n){var r={};t.exports=r,e("../geometry/Bounds");var o=e("../core/Common");r.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,i,a,s,u,c,l,f,d,p,v,h,g=[],y=0,m=0,x=0;t=t||15;var b=function(e,t,n){var r=n%2==1&&n>1;if(!d||e!=d.x||t!=d.y){d&&r?(v=d.x,h=d.y):(v=0,h=0);var o={x:v+e,y:h+t};!r&&d||(d=o),g.push(o),m=v+e,x=h+t}},_=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":m=e.x,x=e.y;break;case"H":m=e.x;break;case"V":x=e.y}b(m,x,e.pathSegType)}};for(r._svgPathToAbsolute(e),a=e.getTotalLength(),c=[],n=0;n<e.pathSegList.numberOfItems;n+=1)c.push(e.pathSegList.getItem(n));for(l=c.concat();y<a;){if(p=e.getPathSegAtLength(y),(u=c[p])!=f){for(;l.length&&l[0]!=u;)_(l.shift());f=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":s=e.getPointAtLength(y),b(s.x,s.y,0)}y+=t}for(n=0,i=l.length;n<i;++n)_(l[n]);return g},r._svgPathToAbsolute=function(e){for(var t,n,r,o,i,a,s=e.pathSegList,u=0,c=0,l=s.numberOfItems,f=0;f<l;++f){var d=s.getItem(f),p=d.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in d&&(u=d.x),"y"in d&&(c=d.y);else switch("x1"in d&&(r=u+d.x1),"x2"in d&&(i=u+d.x2),"y1"in d&&(o=c+d.y1),"y2"in d&&(a=c+d.y2),"x"in d&&(u+=d.x),"y"in d&&(c+=d.y),p){case"m":s.replaceItem(e.createSVGPathSegMovetoAbs(u,c),f);break;case"l":s.replaceItem(e.createSVGPathSegLinetoAbs(u,c),f);break;case"h":s.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(u),f);break;case"v":s.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),f);break;case"c":s.replaceItem(e.createSVGPathSegCurvetoCubicAbs(u,c,r,o,i,a),f);break;case"s":s.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(u,c,i,a),f);break;case"q":s.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(u,c,r,o),f);break;case"t":s.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(u,c),f);break;case"a":s.replaceItem(e.createSVGPathSegArcAbs(u,c,d.r1,d.r2,d.angle,d.largeArcFlag,d.sweepFlag),f);break;case"z":case"Z":u=t,c=n}"M"!=p&&"m"!=p||(t=u,n=c)}}},{"../core/Common":14,"../geometry/Bounds":26}],28:[function(e,t,n){var r={};t.exports=r,r.create=function(e,t){return{x:e||0,y:t||0}},r.clone=function(e){return{x:e.x,y:e.y}},r.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},r.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},r.rotate=function(e,t,n){var r=Math.cos(t),o=Math.sin(t);n||(n={});var i=e.x*r-e.y*o;return n.y=e.x*o+e.y*r,n.x=i,n},r.rotateAbout=function(e,t,n,r){var o=Math.cos(t),i=Math.sin(t);r||(r={});var a=n.x+((e.x-n.x)*o-(e.y-n.y)*i);return r.y=n.y+((e.x-n.x)*i+(e.y-n.y)*o),r.x=a,r},r.normalise=function(e){var t=r.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},r.dot=function(e,t){return e.x*t.x+e.y*t.y},r.cross=function(e,t){return e.x*t.y-e.y*t.x},r.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},r.add=function(e,t,n){return n||(n={}),n.x=e.x+t.x,n.y=e.y+t.y,n},r.sub=function(e,t,n){return n||(n={}),n.x=e.x-t.x,n.y=e.y-t.y,n},r.mult=function(e,t){return{x:e.x*t,y:e.y*t}},r.div=function(e,t){return{x:e.x/t,y:e.y/t}},r.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},r.neg=function(e){return{x:-e.x,y:-e.y}},r.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]},{}],29:[function(e,t,n){var r={};t.exports=r;var o=e("../geometry/Vector"),i=e("../core/Common");r.create=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r],i={x:o.x,y:o.y,index:r,body:t,isInternal:!1};n.push(i)}return n},r.fromPath=function(e,t){var n=[];return e.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,function(e,t,r){n.push({x:parseFloat(t),y:parseFloat(r)})}),r.create(n,t)},r.centre=function(e){for(var t,n,i,a=r.area(e,!0),s={x:0,y:0},u=0;u<e.length;u++)i=(u+1)%e.length,t=o.cross(e[u],e[i]),n=o.mult(o.add(e[u],e[i]),t),s=o.add(s,n);return o.div(s,6*a)},r.mean=function(e){for(var t={x:0,y:0},n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y;return o.div(t,e.length)},r.area=function(e,t){for(var n=0,r=e.length-1,o=0;o<e.length;o++)n+=(e[r].x-e[o].x)*(e[r].y+e[o].y),r=o;return t?n/2:Math.abs(n)/2},r.inertia=function(e,t){for(var n,r,i=0,a=0,s=e,u=0;u<s.length;u++)r=(u+1)%s.length,n=Math.abs(o.cross(s[r],s[u])),i+=n*(o.dot(s[r],s[r])+o.dot(s[r],s[u])+o.dot(s[u],s[u])),a+=n;return t/6*(i/a)},r.translate=function(e,t,n){var r;if(n)for(r=0;r<e.length;r++)e[r].x+=t.x*n,e[r].y+=t.y*n;else for(r=0;r<e.length;r++)e[r].x+=t.x,e[r].y+=t.y;return e},r.rotate=function(e,t,n){if(0!==t){for(var r=Math.cos(t),o=Math.sin(t),i=0;i<e.length;i++){var a=e[i],s=a.x-n.x,u=a.y-n.y;a.x=n.x+(s*r-u*o),a.y=n.y+(s*o+u*r)}return e}},r.contains=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=e[(n+1)%e.length];if((t.x-r.x)*(o.y-r.y)+(t.y-r.y)*(r.x-o.x)>0)return!1}return!0},r.scale=function(e,t,n,i){if(1===t&&1===n)return e;var a,s;i=i||r.centre(e);for(var u=0;u<e.length;u++)a=e[u],s=o.sub(a,i),e[u].x=i.x+s.x*t,e[u].y=i.y+s.y*n;return e},r.chamfer=function(e,t,n,r,a){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,r=r||2,a=a||14;for(var s=[],u=0;u<e.length;u++){var c=e[u-1>=0?u-1:e.length-1],l=e[u],f=e[(u+1)%e.length],d=t[u<t.length?u:t.length-1];if(0!==d){var p=o.normalise({x:l.y-c.y,y:c.x-l.x}),v=o.normalise({x:f.y-l.y,y:l.x-f.x}),h=Math.sqrt(2*Math.pow(d,2)),g=o.mult(i.clone(p),d),y=o.normalise(o.mult(o.add(p,v),.5)),m=o.sub(l,o.mult(y,h)),x=n;-1===n&&(x=1.75*Math.pow(d,.32)),(x=i.clamp(x,r,a))%2==1&&(x+=1);for(var b=Math.acos(o.dot(p,v)),_=b/x,w=0;w<x;w++)s.push(o.add(o.rotate(g,_*w),m))}else s.push(l)}return s},r.clockwiseSort=function(e){var t=r.mean(e);return e.sort(function(e,n){return o.angle(t,e)-o.angle(t,n)}),e},r.isConvex=function(e){var t,n,r,o,i=0,a=e.length;if(a<3)return null;for(t=0;t<a;t++)if(r=(t+2)%a,o=(e[n=(t+1)%a].x-e[t].x)*(e[r].y-e[n].y),(o-=(e[n].y-e[t].y)*(e[r].x-e[n].x))<0?i|=1:o>0&&(i|=2),3===i)return!1;return 0!==i||null},r.hull=function(e){var t,n,r=[],i=[];for((e=e.slice(0)).sort(function(e,t){var n=e.x-t.x;return 0!==n?n:e.y-t.y}),n=0;n<e.length;n+=1){for(t=e[n];i.length>=2&&o.cross3(i[i.length-2],i[i.length-1],t)<=0;)i.pop();i.push(t)}for(n=e.length-1;n>=0;n-=1){for(t=e[n];r.length>=2&&o.cross3(r[r.length-2],r[r.length-1],t)<=0;)r.pop();r.push(t)}return r.pop(),i.pop(),r.concat(i)}},{"../core/Common":14,"../geometry/Vector":28}],30:[function(e,t,n){var r=t.exports=e("../core/Matter");r.Body=e("../body/Body"),r.Composite=e("../body/Composite"),r.World=e("../body/World"),r.Contact=e("../collision/Contact"),r.Detector=e("../collision/Detector"),r.Grid=e("../collision/Grid"),r.Pairs=e("../collision/Pairs"),r.Pair=e("../collision/Pair"),r.Query=e("../collision/Query"),r.Resolver=e("../collision/Resolver"),r.SAT=e("../collision/SAT"),r.Constraint=e("../constraint/Constraint"),r.MouseConstraint=e("../constraint/MouseConstraint"),r.Common=e("../core/Common"),r.Engine=e("../core/Engine"),r.Events=e("../core/Events"),r.Mouse=e("../core/Mouse"),r.Runner=e("../core/Runner"),r.Sleeping=e("../core/Sleeping"),r.Plugin=e("../core/Plugin"),r.Bodies=e("../factory/Bodies"),r.Composites=e("../factory/Composites"),r.Axes=e("../geometry/Axes"),r.Bounds=e("../geometry/Bounds"),r.Svg=e("../geometry/Svg"),r.Vector=e("../geometry/Vector"),r.Vertices=e("../geometry/Vertices"),r.Render=e("../render/Render"),r.RenderPixi=e("../render/RenderPixi"),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,r.Engine.run=r.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(e,t,n){var r={};t.exports=r;var o=e("../core/Common"),i=e("../body/Composite"),a=e("../geometry/Bounds"),s=e("../core/Events"),u=e("../collision/Grid"),c=e("../geometry/Vector"),l=e("../core/Mouse");!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(o.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r.create=function(e){var t={controller:r,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},i=o.extend(t,e);return i.canvas&&(i.canvas.width=i.options.width||i.canvas.width,i.canvas.height=i.options.height||i.canvas.height),i.mouse=e.mouse,i.engine=e.engine,i.canvas=i.canvas||n(i.options.width,i.options.height),i.context=i.canvas.getContext("2d"),i.textures={},i.bounds=i.bounds||{min:{x:0,y:0},max:{x:i.canvas.width,y:i.canvas.height}},1!==i.options.pixelRatio&&r.setPixelRatio(i,i.options.pixelRatio),o.isElement(i.element)?i.element.appendChild(i.canvas):i.canvas.parentNode||o.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),i},r.run=function(t){!function n(o){t.frameRequestId=e(n),r.world(t)}()},r.stop=function(e){t(e.frameRequestId)},r.setPixelRatio=function(e,t){var n=e.options,r=e.canvas;"auto"===t&&(t=f(r)),n.pixelRatio=t,r.setAttribute("data-pixel-ratio",t),r.width=n.width*t,r.height=n.height*t,r.style.width=n.width+"px",r.style.height=n.height+"px",e.context.scale(t,t)},r.lookAt=function(e,t,n,r){r=void 0===r||r,t=o.isArray(t)?t:[t],n=n||{x:0,y:0};for(var i={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},a=0;a<t.length;a+=1){var s=t[a],u=s.bounds?s.bounds.min:s.min||s.position||s,c=s.bounds?s.bounds.max:s.max||s.position||s;u&&c&&(u.x<i.min.x&&(i.min.x=u.x),c.x>i.max.x&&(i.max.x=c.x),u.y<i.min.y&&(i.min.y=u.y),c.y>i.max.y&&(i.max.y=c.y))}var f=i.max.x-i.min.x+2*n.x,d=i.max.y-i.min.y+2*n.y,p=e.canvas.height,v=e.canvas.width,h=v/p,g=f/d,y=1,m=1;g>h?m=g/h:y=h/g,e.options.hasBounds=!0,e.bounds.min.x=i.min.x,e.bounds.max.x=i.min.x+f*y,e.bounds.min.y=i.min.y,e.bounds.max.y=i.min.y+d*m,r&&(e.bounds.min.x+=.5*f-f*y*.5,e.bounds.max.x+=.5*f-f*y*.5,e.bounds.min.y+=.5*d-d*m*.5,e.bounds.max.y+=.5*d-d*m*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(l.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),l.setOffset(e.mouse,e.bounds.min))},r.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,r=t/e.options.width,o=n/e.options.height;e.context.scale(1/r,1/o),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},r.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},r.world=function(e){var t,n=e.engine,o=n.world,f=e.canvas,d=e.context,v=e.options,h=i.allBodies(o),g=i.allConstraints(o),y=v.wireframes?v.wireframeBackground:v.background,m=[],x=[],b={timestamp:n.timing.timestamp};if(s.trigger(e,"beforeRender",b),e.currentBackground!==y&&p(e,y),d.globalCompositeOperation="source-in",d.fillStyle="transparent",d.fillRect(0,0,f.width,f.height),d.globalCompositeOperation="source-over",v.hasBounds){for(t=0;t<h.length;t++){var _=h[t];a.overlaps(_.bounds,e.bounds)&&m.push(_)}for(t=0;t<g.length;t++){var w=g[t],S=w.bodyA,I=w.bodyB,A=w.pointA,C=w.pointB;S&&(A=c.add(S.position,w.pointA)),I&&(C=c.add(I.position,w.pointB)),A&&C&&(a.contains(e.bounds,A)||a.contains(e.bounds,C))&&x.push(w)}r.startViewTransform(e),e.mouse&&(l.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),l.setOffset(e.mouse,e.bounds.min))}else x=g,m=h;!v.wireframes||n.enableSleeping&&v.showSleeping?r.bodies(e,m,d):(v.showConvexHulls&&r.bodyConvexHulls(e,m,d),r.bodyWireframes(e,m,d)),v.showBounds&&r.bodyBounds(e,m,d),(v.showAxes||v.showAngleIndicator)&&r.bodyAxes(e,m,d),v.showPositions&&r.bodyPositions(e,m,d),v.showVelocity&&r.bodyVelocity(e,m,d),v.showIds&&r.bodyIds(e,m,d),v.showSeparations&&r.separations(e,n.pairs.list,d),v.showCollisions&&r.collisions(e,n.pairs.list,d),v.showVertexNumbers&&r.vertexNumbers(e,m,d),v.showMousePosition&&r.mousePosition(e,e.mouse,d),r.constraints(x,d),v.showBroadphase&&n.broadphase.controller===u&&r.grid(e,n.broadphase,d),v.showDebug&&r.debug(e,d),v.hasBounds&&r.endViewTransform(e),s.trigger(e,"afterRender",b)},r.debug=function(e,t){var n=t,r=e.engine,o=r.world,a=r.metrics,s=e.options;if(i.allBodies(o),r.timing.timestamp-(e.debugTimestamp||0)>=500){var u="";a.timing&&(u+="fps: "+Math.round(a.timing.fps)+"    "),e.debugString=u,e.debugTimestamp=r.timing.timestamp}if(e.debugString){n.font="12px Arial",s.wireframes?n.fillStyle="rgba(255,255,255,0.5)":n.fillStyle="rgba(0,0,0,0.5)";for(var c=e.debugString.split("\n"),l=0;l<c.length;l++)n.fillText(c[l],50,50+18*l)}},r.constraints=function(e,t){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(i.render.visible&&i.pointA&&i.pointB){var a,s,u=i.bodyA,l=i.bodyB;if(a=u?c.add(u.position,i.pointA):i.pointA,"pin"===i.render.type)n.beginPath(),n.arc(a.x,a.y,3,0,2*Math.PI),n.closePath();else{if(s=l?c.add(l.position,i.pointB):i.pointB,n.beginPath(),n.moveTo(a.x,a.y),"spring"===i.render.type)for(var f,d=c.sub(s,a),p=c.perp(c.normalise(d)),v=Math.ceil(o.clamp(i.length/5,12,20)),h=1;h<v;h+=1)f=h%2==0?1:-1,n.lineTo(a.x+d.x*(h/v)+p.x*f*4,a.y+d.y*(h/v)+p.y*f*4);n.lineTo(s.x,s.y)}i.render.lineWidth&&(n.lineWidth=i.render.lineWidth,n.strokeStyle=i.render.strokeStyle,n.stroke()),i.render.anchors&&(n.fillStyle=i.render.strokeStyle,n.beginPath(),n.arc(a.x,a.y,3,0,2*Math.PI),n.arc(s.x,s.y,3,0,2*Math.PI),n.closePath(),n.fill())}}},r.bodyShadows=function(e,t,n){for(var r=n,o=(e.engine,0);o<t.length;o++){var i=t[o];if(i.render.visible){if(i.circleRadius)r.beginPath(),r.arc(i.position.x,i.position.y,i.circleRadius,0,2*Math.PI),r.closePath();else{r.beginPath(),r.moveTo(i.vertices[0].x,i.vertices[0].y);for(var a=1;a<i.vertices.length;a++)r.lineTo(i.vertices[a].x,i.vertices[a].y);r.closePath()}var s=i.position.x-.5*e.options.width,u=i.position.y-.2*e.options.height,c=Math.abs(s)+Math.abs(u);r.shadowColor="rgba(0,0,0,0.15)",r.shadowOffsetX=.05*s,r.shadowOffsetY=.05*u,r.shadowBlur=1+12*Math.min(1,c/1e3),r.fill(),r.shadowColor=null,r.shadowOffsetX=null,r.shadowOffsetY=null,r.shadowBlur=null}}},r.bodies=function(e,t,n){var r,o,i,a,s=n,u=(e.engine,e.options),c=u.showInternalEdges||!u.wireframes;for(i=0;i<t.length;i++)if((r=t[i]).render.visible)for(a=r.parts.length>1?1:0;a<r.parts.length;a++)if((o=r.parts[a]).render.visible){if(u.showSleeping&&r.isSleeping?s.globalAlpha=.5*o.render.opacity:1!==o.render.opacity&&(s.globalAlpha=o.render.opacity),o.render.sprite&&o.render.sprite.texture&&!u.wireframes){var l=o.render.sprite,f=d(e,l.texture);s.translate(o.position.x,o.position.y),s.rotate(o.angle),s.drawImage(f,f.width*-l.xOffset*l.xScale,f.height*-l.yOffset*l.yScale,f.width*l.xScale,f.height*l.yScale),s.rotate(-o.angle),s.translate(-o.position.x,-o.position.y)}else{if(o.circleRadius)s.beginPath(),s.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI);else{s.beginPath(),s.moveTo(o.vertices[0].x,o.vertices[0].y);for(var p=1;p<o.vertices.length;p++)!o.vertices[p-1].isInternal||c?s.lineTo(o.vertices[p].x,o.vertices[p].y):s.moveTo(o.vertices[p].x,o.vertices[p].y),o.vertices[p].isInternal&&!c&&s.moveTo(o.vertices[(p+1)%o.vertices.length].x,o.vertices[(p+1)%o.vertices.length].y);s.lineTo(o.vertices[0].x,o.vertices[0].y),s.closePath()}u.wireframes?(s.lineWidth=1,s.strokeStyle="#bbb",s.stroke()):(s.fillStyle=o.render.fillStyle,o.render.lineWidth&&(s.lineWidth=o.render.lineWidth,s.strokeStyle=o.render.strokeStyle,s.stroke()),s.fill())}s.globalAlpha=1}},r.bodyWireframes=function(e,t,n){var r,o,i,a,s,u=n,c=e.options.showInternalEdges;for(u.beginPath(),i=0;i<t.length;i++)if((r=t[i]).render.visible)for(s=r.parts.length>1?1:0;s<r.parts.length;s++){for(o=r.parts[s],u.moveTo(o.vertices[0].x,o.vertices[0].y),a=1;a<o.vertices.length;a++)!o.vertices[a-1].isInternal||c?u.lineTo(o.vertices[a].x,o.vertices[a].y):u.moveTo(o.vertices[a].x,o.vertices[a].y),o.vertices[a].isInternal&&!c&&u.moveTo(o.vertices[(a+1)%o.vertices.length].x,o.vertices[(a+1)%o.vertices.length].y);u.lineTo(o.vertices[0].x,o.vertices[0].y)}u.lineWidth=1,u.strokeStyle="#bbb",u.stroke()},r.bodyConvexHulls=function(e,t,n){var r,o,i,a=n;for(a.beginPath(),o=0;o<t.length;o++)if((r=t[o]).render.visible&&1!==r.parts.length){for(a.moveTo(r.vertices[0].x,r.vertices[0].y),i=1;i<r.vertices.length;i++)a.lineTo(r.vertices[i].x,r.vertices[i].y);a.lineTo(r.vertices[0].x,r.vertices[0].y)}a.lineWidth=1,a.strokeStyle="rgba(255,255,255,0.2)",a.stroke()},r.vertexNumbers=function(e,t,n){var r,o,i,a=n;for(r=0;r<t.length;r++){var s=t[r].parts;for(i=s.length>1?1:0;i<s.length;i++){var u=s[i];for(o=0;o<u.vertices.length;o++)a.fillStyle="rgba(255,255,255,0.2)",a.fillText(r+"_"+o,u.position.x+.8*(u.vertices[o].x-u.position.x),u.position.y+.8*(u.vertices[o].y-u.position.y))}}},r.mousePosition=function(e,t,n){var r=n;r.fillStyle="rgba(255,255,255,0.8)",r.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},r.bodyBounds=function(e,t,n){var r=n,o=(e.engine,e.options);r.beginPath();for(var i=0;i<t.length;i++){var a=t[i];if(a.render.visible)for(var s=t[i].parts,u=s.length>1?1:0;u<s.length;u++){var c=s[u];r.rect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}}o.wireframes?r.strokeStyle="rgba(255,255,255,0.08)":r.strokeStyle="rgba(0,0,0,0.1)",r.lineWidth=1,r.stroke()},r.bodyAxes=function(e,t,n){var r,o,i,a,s=n,u=(e.engine,e.options);for(s.beginPath(),o=0;o<t.length;o++){var c=t[o],l=c.parts;if(c.render.visible)if(u.showAxes)for(i=l.length>1?1:0;i<l.length;i++)for(r=l[i],a=0;a<r.axes.length;a++){var f=r.axes[a];s.moveTo(r.position.x,r.position.y),s.lineTo(r.position.x+20*f.x,r.position.y+20*f.y)}else for(i=l.length>1?1:0;i<l.length;i++)for(r=l[i],a=0;a<r.axes.length;a++)s.moveTo(r.position.x,r.position.y),s.lineTo((r.vertices[0].x+r.vertices[r.vertices.length-1].x)/2,(r.vertices[0].y+r.vertices[r.vertices.length-1].y)/2)}u.wireframes?(s.strokeStyle="indianred",s.lineWidth=1):(s.strokeStyle="rgba(255, 255, 255, 0.4)",s.globalCompositeOperation="overlay",s.lineWidth=2),s.stroke(),s.globalCompositeOperation="source-over"},r.bodyPositions=function(e,t,n){var r,o,i,a,s=n,u=(e.engine,e.options);for(s.beginPath(),i=0;i<t.length;i++)if((r=t[i]).render.visible)for(a=0;a<r.parts.length;a++)o=r.parts[a],s.arc(o.position.x,o.position.y,3,0,2*Math.PI,!1),s.closePath();for(u.wireframes?s.fillStyle="indianred":s.fillStyle="rgba(0,0,0,0.5)",s.fill(),s.beginPath(),i=0;i<t.length;i++)(r=t[i]).render.visible&&(s.arc(r.positionPrev.x,r.positionPrev.y,2,0,2*Math.PI,!1),s.closePath());s.fillStyle="rgba(255,165,0,0.8)",s.fill()},r.bodyVelocity=function(e,t,n){var r=n;r.beginPath();for(var o=0;o<t.length;o++){var i=t[o];i.render.visible&&(r.moveTo(i.position.x,i.position.y),r.lineTo(i.position.x+2*(i.position.x-i.positionPrev.x),i.position.y+2*(i.position.y-i.positionPrev.y)))}r.lineWidth=3,r.strokeStyle="cornflowerblue",r.stroke()},r.bodyIds=function(e,t,n){var r,o,i=n;for(r=0;r<t.length;r++)if(t[r].render.visible){var a=t[r].parts;for(o=a.length>1?1:0;o<a.length;o++){var s=a[o];i.font="12px Arial",i.fillStyle="rgba(255,255,255,0.5)",i.fillText(s.id,s.position.x+10,s.position.y-10)}}},r.collisions=function(e,t,n){var r,o,i,a,s=n,u=e.options;for(s.beginPath(),i=0;i<t.length;i++)if((r=t[i]).isActive)for(o=r.collision,a=0;a<r.activeContacts.length;a++){var c=r.activeContacts[a],l=c.vertex;s.rect(l.x-1.5,l.y-1.5,3.5,3.5)}for(u.wireframes?s.fillStyle="rgba(255,255,255,0.7)":s.fillStyle="orange",s.fill(),s.beginPath(),i=0;i<t.length;i++)if((r=t[i]).isActive&&(o=r.collision,r.activeContacts.length>0)){var f=r.activeContacts[0].vertex.x,d=r.activeContacts[0].vertex.y;2===r.activeContacts.length&&(f=(r.activeContacts[0].vertex.x+r.activeContacts[1].vertex.x)/2,d=(r.activeContacts[0].vertex.y+r.activeContacts[1].vertex.y)/2),o.bodyB===o.supports[0].body||!0===o.bodyA.isStatic?s.moveTo(f-8*o.normal.x,d-8*o.normal.y):s.moveTo(f+8*o.normal.x,d+8*o.normal.y),s.lineTo(f,d)}u.wireframes?s.strokeStyle="rgba(255,165,0,0.7)":s.strokeStyle="orange",s.lineWidth=1,s.stroke()},r.separations=function(e,t,n){var r,o,i,a,s,u=n,c=e.options;for(u.beginPath(),s=0;s<t.length;s++)if((r=t[s]).isActive){o=r.collision,i=o.bodyA,a=o.bodyB;var l=1;a.isStatic||i.isStatic||(l=.5),a.isStatic&&(l=0),u.moveTo(a.position.x,a.position.y),u.lineTo(a.position.x-o.penetration.x*l,a.position.y-o.penetration.y*l),l=1,a.isStatic||i.isStatic||(l=.5),i.isStatic&&(l=0),u.moveTo(i.position.x,i.position.y),u.lineTo(i.position.x+o.penetration.x*l,i.position.y+o.penetration.y*l)}c.wireframes?u.strokeStyle="rgba(255,165,0,0.5)":u.strokeStyle="orange",u.stroke()},r.grid=function(e,t,n){var r=n,i=e.options;i.wireframes?r.strokeStyle="rgba(255,180,0,0.1)":r.strokeStyle="rgba(255,180,0,0.5)",r.beginPath();for(var a=o.keys(t.buckets),s=0;s<a.length;s++){var u=a[s];if(!(t.buckets[u].length<2)){var c=u.split(/C|R/);r.rect(.5+parseInt(c[1],10)*t.bucketWidth,.5+parseInt(c[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}r.lineWidth=1,r.stroke()},r.inspector=function(e,t){e.engine;var n,r=e.selected,o=e.render,i=o.options;if(i.hasBounds){var a=o.bounds.max.x-o.bounds.min.x,s=o.bounds.max.y-o.bounds.min.y,u=a/o.options.width,c=s/o.options.height;t.scale(1/u,1/c),t.translate(-o.bounds.min.x,-o.bounds.min.y)}for(var l=0;l<r.length;l++){var f=r[l].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),f.type){case"body":n=f.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var d=f.pointA;f.bodyA&&(d=f.pointB),t.beginPath(),t.arc(d.x,d.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),i.hasBounds&&t.setTransform(1,0,0,1,0,0)};var n=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},f=function(e){var t=e.getContext("2d"),n=window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/r},d=function(e,t){var n=e.textures[t];return n||((n=e.textures[t]=new Image).src=t,n)},p=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(e,t,n){var r={};t.exports=r;var o=e("../geometry/Bounds"),i=e("../body/Composite"),a=e("../core/Common"),s=e("../core/Events"),u=e("../geometry/Vector");!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(a.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r.create=function(e){a.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var t={controller:r,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},n=a.extend(t,e),o=!n.options.wireframes&&"transparent"===n.options.background;return n.pixiOptions=n.pixiOptions||{view:n.canvas,transparent:o,antialias:!0,backgroundColor:e.background},n.mouse=e.mouse,n.engine=e.engine,n.renderer=n.renderer||new PIXI.WebGLRenderer(n.options.width,n.options.height,n.pixiOptions),n.container=n.container||new PIXI.Container,n.spriteContainer=n.spriteContainer||new PIXI.Container,n.canvas=n.canvas||n.renderer.view,n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.options.width,y:n.options.height}},s.on(n.engine,"beforeUpdate",function(){r.clear(n)}),n.textures={},n.sprites={},n.primitives={},n.container.addChild(n.spriteContainer),a.isElement(n.element)?n.element.appendChild(n.canvas):a.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),n.canvas.oncontextmenu=function(){return!1},n.canvas.onselectstart=function(){return!1},n},r.run=function(t){!function n(o){t.frameRequestId=e(n),r.world(t)}()},r.stop=function(e){t(e.frameRequestId)},r.clear=function(e){for(var t=e.container,n=e.spriteContainer;t.children[0];)t.removeChild(t.children[0]);for(;n.children[0];)n.removeChild(n.children[0]);var r=e.sprites["bg-0"];e.textures={},e.sprites={},e.primitives={},e.sprites["bg-0"]=r,r&&t.addChildAt(r,0),e.container.addChild(e.spriteContainer),e.currentBackground=null,t.scale.set(1,1),t.position.set(0,0)},r.setBackground=function(e,t){if(e.currentBackground!==t){var n=t.indexOf&&-1!==t.indexOf("#"),r=e.sprites["bg-0"];if(n){var o=a.colorToNumber(t);e.renderer.backgroundColor=o,r&&e.container.removeChild(r)}else if(!r){var i=l(e,t);(r=e.sprites["bg-0"]=new PIXI.Sprite(i)).position.x=0,r.position.y=0,e.container.addChildAt(r,0)}e.currentBackground=t}},r.world=function(e){var t,n=e.engine,a=n.world,s=e.renderer,c=e.container,l=e.options,f=i.allBodies(a),d=i.allConstraints(a),p=[];l.wireframes?r.setBackground(e,l.wireframeBackground):r.setBackground(e,l.background);var v=e.bounds.max.x-e.bounds.min.x,h=e.bounds.max.y-e.bounds.min.y,g=v/e.options.width,y=h/e.options.height;if(l.hasBounds){for(t=0;t<f.length;t++){var m=f[t];m.render.sprite.visible=o.overlaps(m.bounds,e.bounds)}for(t=0;t<d.length;t++){var x=d[t],b=x.bodyA,_=x.bodyB,w=x.pointA,S=x.pointB;b&&(w=u.add(b.position,x.pointA)),_&&(S=u.add(_.position,x.pointB)),w&&S&&(o.contains(e.bounds,w)||o.contains(e.bounds,S))&&p.push(x)}c.scale.set(1/g,1/y),c.position.set(-e.bounds.min.x*(1/g),-e.bounds.min.y*(1/y))}else p=d;for(t=0;t<f.length;t++)r.body(e,f[t]);for(t=0;t<p.length;t++)r.constraint(e,p[t]);s.render(c)},r.constraint=function(e,t){e.engine;var n=t.bodyA,r=t.bodyB,o=t.pointA,i=t.pointB,s=e.container,u=t.render,c="c-"+t.id,l=e.primitives[c];l||(l=e.primitives[c]=new PIXI.Graphics),u.visible&&t.pointA&&t.pointB?(-1===a.indexOf(s.children,l)&&s.addChild(l),l.clear(),l.beginFill(0,0),l.lineStyle(u.lineWidth,a.colorToNumber(u.strokeStyle),1),n?l.moveTo(n.position.x+o.x,n.position.y+o.y):l.moveTo(o.x,o.y),r?l.lineTo(r.position.x+i.x,r.position.y+i.y):l.lineTo(i.x,i.y),l.endFill()):l.clear()},r.body=function(e,t){e.engine;var r=t.render;if(r.visible)if(r.sprite&&r.sprite.texture){var o="b-"+t.id,i=e.sprites[o],s=e.spriteContainer;i||(i=e.sprites[o]=n(e,t)),-1===a.indexOf(s.children,i)&&s.addChild(i),i.position.x=t.position.x,i.position.y=t.position.y,i.rotation=t.angle,i.scale.x=r.sprite.xScale||1,i.scale.y=r.sprite.yScale||1}else{var u="b-"+t.id,l=e.primitives[u],f=e.container;l||((l=e.primitives[u]=c(e,t)).initialAngle=t.angle),-1===a.indexOf(f.children,l)&&f.addChild(l),l.position.x=t.position.x,l.position.y=t.position.y,l.rotation=t.angle-l.initialAngle}};var n=function(e,t){var n=t.render,r=n.sprite.texture,o=l(e,r),i=new PIXI.Sprite(o);return i.anchor.x=t.render.sprite.xOffset,i.anchor.y=t.render.sprite.yOffset,i},c=function(e,t){var n,r=t.render,o=e.options,i=new PIXI.Graphics,s=a.colorToNumber(r.fillStyle),u=a.colorToNumber(r.strokeStyle),c=a.colorToNumber(r.strokeStyle),l=a.colorToNumber("#bbb"),f=a.colorToNumber("#CD5C5C");i.clear();for(var d=t.parts.length>1?1:0;d<t.parts.length;d++){n=t.parts[d],o.wireframes?(i.beginFill(0,0),i.lineStyle(1,l,1)):(i.beginFill(s,1),i.lineStyle(r.lineWidth,u,1)),i.moveTo(n.vertices[0].x-t.position.x,n.vertices[0].y-t.position.y);for(var p=1;p<n.vertices.length;p++)i.lineTo(n.vertices[p].x-t.position.x,n.vertices[p].y-t.position.y);i.lineTo(n.vertices[0].x-t.position.x,n.vertices[0].y-t.position.y),i.endFill(),(o.showAngleIndicator||o.showAxes)&&(i.beginFill(0,0),o.wireframes?i.lineStyle(1,f,1):i.lineStyle(1,c),i.moveTo(n.position.x-t.position.x,n.position.y-t.position.y),i.lineTo((n.vertices[0].x+n.vertices[n.vertices.length-1].x)/2-t.position.x,(n.vertices[0].y+n.vertices[n.vertices.length-1].y)/2-t.position.y),i.endFill())}return i},l=function(e,t){var n=e.textures[t];return n||(n=e.textures[t]=PIXI.Texture.fromImage(t)),n}}()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)}).call(this,n(4))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function i(e){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,new Promise(function(t,n){var r=new Image;r.src=e,r.onload=function(){t(r)},r.onerror=function(e){n(e)}})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=i,t.loadImageData=function(e){return r(this,void 0,void 0,function(){var t,n,r;return o(this,function(o){switch(o.label){case 0:return[4,i(e)];case 1:if(t=o.sent(),(n=document.createElement("canvas")).width=t.width,n.height=t.height,!(r=n.getContext("2d")))throw new Error("Could not access canvas context");return r.drawImage(t,0,0,t.width,t.height),[2,r.getImageData(0,0,t.width,t.height)]}})})},t.generateGrid=function(e){for(var t=new Array(e.height).fill(void 0).map(function(){return new Array(e.width)}),n=0;4*n<e.data.length;n++){var r=n%e.width;t[Math.floor(n/e.width)][r]=0===e.data[4*n]?1:0}return t},t.invertGrid=function(e){return e.map(function(e){return e.map(function(e){return 0===e?1:0})})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(12),a=n(14),s=n(19);function u(e){return e.ids.join("-")}function c(e,t,n){var r="x"===n?"width":"height";return e[n]+e[r]===t[n]?(2*t[n]-1)/2:t[n]+t[r]===e[n]?(2*e[n]-1)/2:void 0}function l(e,t,n){var r="x"===n?"width":"height",o=Math.max(e[n],t[n]),i=Math.min(e[n]+e[r]-1,t[n]+t[r]-1);if(i>=o)return[o,i]}function f(e,t){return t.find(function(t){return e.x>=t.area.x&&e.x<t.area.x+t.area.width&&e.y>=t.area.y&&e.y<t.area.y+t.area.height})}function d(e,t,n,r){r.addNode(e,{x:t.x,y:t.y,room:n}),n.connections.forEach(function(t){return r.addLink(e,u(t))})}t.connectionId=u,t.computeRooms=function(e){for(var t=[],n=o.cloneDeep(e);;){var i=s.default(n);if(!i)break;for(var a=0;a<i.width;a++)for(var u=0;u<i.height;u++)n[u+i.y][a+i.x]=1;t.push(i)}var f=t.map(function(e,t){return{id:t,area:e,connections:[]}});return f.map(function(e){var t=f.map(function(t){if(e!==t)return function(e,t){var n=c(e.area,t.area,"x"),r=l(e.area,t.area,"y");if(void 0!==n&&r)return{start:{x:n,y:r[0]},end:{x:n,y:r[1]},ids:[e.id,t.id].sort()};var o=c(e.area,t.area,"y"),i=l(e.area,t.area,"x");return void 0!==o&&i?{start:{x:i[0],y:o},end:{x:i[1],y:o},ids:[e.id,t.id].sort()}:void 0}(e,t)}).filter(function(e){return Boolean(e)});return r({},e,{connections:t})})},t.computeRoomGraph=function(e){var t=i();return e.map(function(e){e.connections.map(function(n){t.addNode(u(n),{x:(n.start.x+n.end.x)/2,y:(n.start.y+n.end.y)/2,connection:n}),e.connections.map(function(e){n!==e&&t.addLink(u(n),u(e))})})}),t},t.findCurrentRoom=f,t.findPath=function(e,t,n,i,s){var u=f(e,i),c=f(t,i);if(!u||!c)throw new Error("Cannot find a path from outside the level");d("start",e,u,s),d("end",t,c,s);var l=a.aStar(s),p=o.reverse(l.find("start","end").map(function(e){return e.data}));return s.removeNode("start"),s.removeNode("end"),function e(t,n,o){return void 0===o&&(o=1),o<=0?t:e(t.map(function(e,o){var i=t[o-1],a=t[o+1];if(!(i&&a&&"connection"in e))return e;var s=(a.y-i.y)/(a.x-i.x),u=i.y-s*i.x;if(e.connection.start.x===e.connection.end.x){var c=s*e.x+u;return r({},e,{y:Math.min(e.connection.end.y-n,Math.max(e.connection.start.y+n,c))})}var l=(e.y-u)/s;return r({},e,{x:Math.min(e.connection.end.x-n,Math.max(e.connection.start.x+n,l))})}),n,o-1)}(p,n/2,5)}},function(e,t,n){e.exports=function(e){"uniqueLinkId"in(e=e||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),e.multigraph=e.uniqueLinkId);void 0===e.multigraph&&(e.multigraph=!1);var t="function"==typeof Object.create?Object.create(null):{},n=[],c={},l=0,f=0,d=Object.keys?T:R,p=e.multigraph?function(e,t,n){var r=u(e,t),o=c.hasOwnProperty(r);if(o||P(e,t)){o||(c[r]=0);var i="@"+ ++c[r];r=u(e+i,t+i)}return new s(e,t,n,r)}:function(e,t,n){var r=u(e,t);return new s(e,t,n,r)},v=[],h=k,g=k,y=k,m=k,x={addNode:S,addLink:function(e,t,r){y();var o=I(e)||S(e),i=I(t)||S(t),s=p(e,t,r);n.push(s),a(o,s),e!==t&&a(i,s);return h(s,"add"),m(),s},removeLink:C,removeNode:A,getNode:I,getNodesCount:function(){return l},getLinksCount:function(){return n.length},getLinks:function(e){var t=I(e);return t?t.links:null},forEachNode:d,forEachLinkedNode:function(e,n,r){var o=I(e);if(o&&o.links&&"function"==typeof n)return r?function(e,n,r){for(var o=0;o<e.length;++o){var i=e[o];if(i.fromId===n&&r(t[i.toId],i))return!0}}(o.links,e,n):function(e,n,r){for(var o=0;o<e.length;++o){var i=e[o],a=i.fromId===n?i.toId:i.fromId;if(r(t[a],i))return!0}}(o.links,e,n)},forEachLink:function(e){var t,r;if("function"==typeof e)for(t=0,r=n.length;t<r;++t)e(n[t])},beginUpdate:y,endUpdate:m,clear:function(){y(),d(function(e){A(e.id)}),m()},hasLink:P,hasNode:I,getLink:P};return r(x),b=x.on,x.on=function(){return x.beginUpdate=y=B,x.endUpdate=m=M,h=_,g=w,x.on=b,b.apply(x,arguments)},x;var b;function _(e,t){v.push({link:e,changeType:t})}function w(e,t){v.push({node:e,changeType:t})}function S(e,n){if(void 0===e)throw new Error("Invalid node identifier");y();var r=I(e);return r?(r.data=n,g(r,"update")):(r=new i(e,n),l++,g(r,"add")),t[e]=r,m(),r}function I(e){return t[e]}function A(e){var n=I(e);if(!n)return!1;y();var r=n.links;if(r){n.links=null;for(var o=0;o<r.length;++o)C(r[o])}return delete t[e],l--,g(n,"remove"),m(),!0}function C(e){if(!e)return!1;var t=o(e,n);if(t<0)return!1;y(),n.splice(t,1);var r=I(e.fromId),i=I(e.toId);return r&&(t=o(e,r.links))>=0&&r.links.splice(t,1),i&&(t=o(e,i.links))>=0&&i.links.splice(t,1),h(e,"remove"),m(),!0}function P(e,t){var n,r=I(e);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var o=r.links[n];if(o.fromId===e&&o.toId===t)return o}return null}function k(){}function B(){f+=1}function M(){0===(f-=1)&&v.length>0&&(x.fire("changed",v),v.length=0)}function T(e){if("function"==typeof e)for(var n=Object.keys(t),r=0;r<n.length;++r)if(e(t[n[r]]))return!0}function R(e){var n;if("function"==typeof e)for(n in t)if(e(t[n]))return!0}};var r=n(13);function o(e,t){if(!t)return-1;if(t.indexOf)return t.indexOf(e);var n,r=t.length;for(n=0;n<r;n+=1)if(t[n]===e)return n;return-1}function i(e,t){this.id=e,this.links=null,this.data=t}function a(e,t){e.links?e.links.push(t):e.links=[t]}function s(e,t,n,r){this.fromId=e,this.toId=t,this.data=n,this.id=r}function u(e,t){return e.toString()+"👉 "+t.toString()}},function(e,t){e.exports=function(e){!function(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}(e);var t=function(e){var t=Object.create(null);return{on:function(n,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var i=t[n];return i||(i=t[n]=[]),i.push({callback:r,ctx:o}),e},off:function(n,r){var o=void 0===n;if(o)return t=Object.create(null),e;if(t[n]){var i="function"!=typeof r;if(i)delete t[n];else for(var a=t[n],s=0;s<a.length;++s)a[s].callback===r&&a.splice(s,1)}return e},fire:function(n){var r,o=t[n];if(!o)return e;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var a=o[i];a.callback.apply(a.ctx,r)}return e}}}(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e}},function(e,t,n){e.exports={aStar:n(15),aGreedy:n(16),nba:n(17)}},function(e,t,n){e.exports=function(e,t){var n=(t=t||{}).oriented,i=t.heuristic;i||(i=a.heuristic);var c=t.distance;c||(c=a.distance);var l=o();return{find:function(t,o){var f=e.getNode(t);if(!f)throw new Error("fromId is not defined in this graph: "+t);var d=e.getNode(o);if(!d)throw new Error("toId is not defined in this graph: "+o);l.reset();var p,v=new Map,h=new r({compare:a.compareFScore,setNodeId:a.setHeapIndex}),g=l.createNewState(f);v.set(t,g),g.fScore=i(f,d),g.distanceToSource=0,h.push(g),g.open=1;for(;h.length>0;){if(p=h.pop(),y=d,p.node===y)return u(p);p.closed=!0,e.forEachLinkedNode(p.node.id,m,n)}var y;return s;function m(e,t){var n=v.get(e.id);if(n||(n=l.createNewState(e),v.set(e.id,n)),!n.closed){0===n.open&&(h.push(n),n.open=1);var r=p.distanceToSource+c(e,p.node,t);r>=n.distanceToSource||(n.parent=p,n.distanceToSource=r,n.fScore=r+i(n.node,d),h.updateItem(n.heapIndex))}}}}};var r=n(1),o=n(5),i=n(2),a=n(3),s=a.NO_PATH;function u(e){for(var t=[e.node],n=e.parent;n;)t.push(n.node),n=n.parent;return t}e.exports.l2=i.l2,e.exports.l1=i.l1},function(e,t,n){e.exports=function(e,t){var n=(t=t||{}).oriented,i=t.heuristic;i||(i=a.heuristic);var l=t.distance;l||(l=a.distance);var f=o();return{find:function(t,o){var d=e.getNode(t);if(!d)throw new Error("fromId is not defined in this graph: "+t);var p=e.getNode(o);if(!p)throw new Error("toId is not defined in this graph: "+o);if(d===p)return[d];f.reset();var v=n?function(e,t){if(I===s){if(t.fromId===A.node.id)return P(e,t,A)}else if(I===u&&t.toId===A.node.id)return P(e,t,A)}:function(e,t){return P(e,t,A)},h=new Map,g=new r({compare:a.compareFScore,setNodeId:a.setHeapIndex}),y=new r({compare:a.compareFScore,setNodeId:a.setHeapIndex}),m=f.createNewState(d);h.set(t,m),m.fScore=i(d,p),m.distanceToSource=0,g.push(m),m.open=s;var x=f.createNewState(p);x.fScore=i(p,d),x.distanceToSource=0,y.push(x),x.open=u;var b,_,w=Number.POSITIVE_INFINITY,S=g,I=s;for(;g.length>0&&y.length>0;){g.length<y.length?(I=s,S=g):(I=u,S=y);var A=S.pop();if(A.closed=!0,!(A.distanceToSource>w)&&(e.forEachLinkedNode(A.node.id,v),b&&_))return C(b,_)}return c;function C(e,t){for(var n=[],r=e;r;)n.push(r.node),r=r.parent;for(var o=t;o;)n.unshift(o.node),o=o.parent;return n}function P(e,t,n){var r=h.get(e.id);if(r||(r=f.createNewState(e),h.set(e.id,r)),!r.closed)if(function(e){var t=e.open;if(t&&t!==I)return!0;return!1}(r)){var o=r.distanceToSource+n.distanceToSource;o<w&&(b=r,_=n,w=o)}else{var a=n.distanceToSource+l(r.node,n.node,t);if(!(a>=r.distanceToSource)){var u=I===s?p:d,c=a+i(r.node,u);c>=w||(r.fScore=c,0===r.open&&(S.push(r),S.updateItem(r.heapIndex),r.open=I),r.parent=n,r.distanceToSource=a)}}}}}};var r=n(1),o=n(5),i=n(2),a=n(3),s=1,u=2,c=a.NO_PATH;e.exports.l2=i.l2,e.exports.l1=i.l1},function(e,t,n){e.exports=function(e,t){var n=(t=t||{}).oriented,o=t.quitFast,u=t.heuristic;u||(u=i.heuristic);var c=t.distance;c||(c=i.distance);var l=a();return{find:function(t,a){var f=e.getNode(t);if(!f)throw new Error("fromId is not defined in this graph: "+t);var d=e.getNode(a);if(!d)throw new Error("toId is not defined in this graph: "+a);l.reset();var p,v=n?function(e,t){if(t.fromId===S.node.id)return P(e,t)}:P,h=n?function(e,t){if(t.toId===S.node.id)return k(e,t)}:k,g=new Map,y=new r({compare:i.compareF1Score,setNodeId:i.setH1}),m=new r({compare:i.compareF2Score,setNodeId:i.setH2}),x=Number.POSITIVE_INFINITY,b=l.createNewState(f);g.set(t,b),b.g1=0;var _=u(f,d);b.f1=_,y.push(b);var w=l.createNewState(d);g.set(a,w),w.g2=0;var S,I=_;w.f2=I,m.push(w);for(;m.length&&y.length&&(y.length<m.length?A():C(),!o||!p););return function(e){if(!e)return s;var t=[e.node],n=e.p1;for(;n;)t.push(n.node),n=n.p1;var r=e.p2;for(;r;)t.unshift(r.node),r=r.p2;return t}(p);function A(){(S=y.pop()).closed||(S.closed=!0,S.f1<x&&S.g1+I-u(f,S.node)<x&&e.forEachLinkedNode(S.node.id,v),y.length>0&&(_=y.peek().f1))}function C(){(S=m.pop()).closed||(S.closed=!0,S.f2<x&&S.g2+_-u(S.node,d)<x&&e.forEachLinkedNode(S.node.id,h),m.length>0&&(I=m.peek().f2))}function P(e,t){var n=g.get(e.id);if(n||(n=l.createNewState(e),g.set(e.id,n)),!n.closed){var r=S.g1+c(S.node,e,t);r<n.g1&&(n.g1=r,n.f1=r+u(n.node,d),n.p1=S,n.h1<0?y.push(n):y.updateItem(n.h1));var o=n.g1+n.g2;o<x&&(x=o,p=n)}}function k(e,t){var n=g.get(e.id);if(n||(n=l.createNewState(e),g.set(e.id,n)),!n.closed){var r=S.g2+c(S.node,e,t);r<n.g2&&(n.g2=r,n.f2=r+u(f,n.node),n.p2=S,n.h2<0?m.push(n):m.updateItem(n.h2));var o=n.g1+n.g2;o<x&&(x=o,p=n)}}}}};var r=n(1),o=n(2),i=n(3),a=n(18),s=i.NO_PATH;e.exports.l2=o.l2,e.exports.l1=o.l1},function(e,t){function n(e){this.node=e,this.p1=null,this.p2=null,this.closed=!1,this.g1=Number.POSITIVE_INFINITY,this.g2=Number.POSITIVE_INFINITY,this.f1=Number.POSITIVE_INFINITY,this.f2=Number.POSITIVE_INFINITY,this.h1=-1,this.h2=-1}e.exports=function(){var e=0,t=[];return{createNewState:function(r){var o=t[e];o?(o.node=r,o.p1=null,o.p2=null,o.closed=!1,o.g1=Number.POSITIVE_INFINITY,o.g2=Number.POSITIVE_INFINITY,o.f1=Number.POSITIVE_INFINITY,o.f2=Number.POSITIVE_INFINITY,o.h1=-1,o.h2=-1):(o=new n(r),t[e]=o);return e++,o},reset:function(){e=0}}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=function(e,t){return e.height*e.width>t.height*t.width},a=function(e,t){var n,a=[],s={height:0,width:0,x:0,y:0};for(n=0;n<e.length;n++)for(var u=e[n],c=n;;){if(!(d=o.last(a))||u>d.height)a.push({height:u,width:0,x:c,y:t-(u-1)});else if(d&&u<d.height){var l=r({},d,{width:n-d.x});i(l,s)&&(s=l),a.pop(),c=d.x;continue}break}for(var f=0;f<a.length;f++){var d=a[f];l=r({},d,{width:n-d.x});i(l,s)&&(s=l)}return s};t.default=function(e){var t={height:0,width:0,x:-1,y:-1},n=e[0].map(function(){return 0});return e.map(function(e,r){n=e.map(function(e,t){return e?0:n[t]+1});var o=a(n,r);i(o,t)&&(t=o)}),t.width*t.height>0?t:void 0}}]);
//# sourceMappingURL=index.js.map